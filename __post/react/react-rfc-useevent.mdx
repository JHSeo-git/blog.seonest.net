---
title: 'React RFC: useEvent()'
description: 'React íŒ€ì—ì„œ ìƒˆë¡œìš´ Hookì¸ useEvent()ì— ëŒ€í•œ RFCë¥¼ ê³µê°œí–ˆìŠµë‹ˆë‹¤. ì–´ë–¤ ë¬¸ì œì ì—ì„œ ì¶œë°œí–ˆëŠ”ì§€ ì‚´í´ë³´ì•˜ìŠµë‹ˆë‹¤.'
date: '2022-05-14T15:01:34.471Z'
category: 'react'
draft: false
tags: ['React', 'Web']
---

> A Hook to define an event handler with an always-stable function identity
> (always-stable í•¨ìˆ˜ë¡œ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¥¼ ì •ì˜í•˜ê¸° ìœ„í•œ hook)
> _- [RFC: useEvent()](https://github.com/reactjs/rfcs/blob/useevent/text/0000-useevent.md)_

`useEvent` hookì— ëŒ€í•œ ë‚´ìš©ì˜ ê¸€ì„ ë´¤ê³  êµ‰ì¥íˆ í¥ë¯¸ë¡œìš´ ë‚´ìš©ì´ ìˆì–´ì„œ ê¸€ë¡œ ì˜®ê²¨ë³´ë ¤ê³  í•©ë‹ˆë‹¤.

ì•„ì§ ì •ì‹ ë¦´ë¦¬ì¦ˆ ë˜ì§€ ì•Šì€ ê¸°ëŠ¥ì´ì§€ë§Œ ë§ì€ ì‚¬ëŒë“¤ì´ ê¸°ëŒ€í•˜ëŠ” hookì¸ê±´ í™•ì‹¤í•œ ê²ƒ ê°™ìŠµë‹ˆë‹¤.

ì–´ë–¤ ë¬¸ì œì ì—ì„œ ì¶œë°œí–ˆëŠ”ì§€ ì‚´í´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

## What is the problem?

### 1. ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì—ì„œ states/propsë¥¼ ì½ëŠ” ê²ƒì€ ìµœì í™”ë¥¼ ë°©í•´í•©ë‹ˆë‹¤.

> re-renderì‹œì— í•¨ìˆ˜ê°€ ë¶ˆí•„ìš”í•˜ê²Œ ë§¤ë²ˆ ì¬ìƒì„±ë˜ê¸° ë•Œë¬¸ì—

ì•„ë˜ ì˜ˆì‹œë¥¼ ë³´ê² ìŠµë‹ˆë‹¤.

```tsx
function _SendButton({ onClick }: { onClick: () => void }) {
  console.log('render SendButton');
  return <button onClick={onClick}>send</button>;
}

const SendButton = React.memo(_SendButton);

export default function App() {
  const [text, setText] = React.useState('');
  const onInput = React.useCallback((e: React.ChangeEvent<HTMLInputElement>) => {
    setText(e.currentTarget.value);
  }, []);

  const send = () => {
    console.log('send:', text);
  };

  return (
    <div>
      <input value={text} onChange={onInput} />
      <SendButton onClick={send} />
    </div>
  );
}
```

`<input>`ì— ì…ë ¥ì„ í•˜ë©´ `App`ì´ ë¦¬ë Œë”ë§ ë˜ë¯€ë¡œ `send` í•¨ìˆ˜ë„ ëŒ€ìƒì´ ë˜ë©° `SendButton` ë˜í•œ prop ì˜í–¥ìœ¼ë¡œ ë¦¬ë Œë”ë§ ë©ë‹ˆë‹¤.

ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ ë³´í†µ `useCallback`ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

```jsx
const send = React.useCallback(() => {
  console.log('send:', text);
}, []);
```

`useCallback`ìœ¼ë¡œ `send`í•¨ìˆ˜ë¥¼ ê°ì‹¼ë‹¤ë©´ ë¦¬ë Œë”ë§ ì‹œì— í•¨ìˆ˜ê°€ ì¬ìƒì„±ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì´ ì˜ˆì‹œì—ëŠ” ë¬¸ì œê°€ ìˆìŠµë‹ˆë‹¤. deps ì˜ì¡´ì„± ë°°ì—´ì´ ë¹„ì–´ìˆê¸°ë•Œë¬¸ì— í•œ ë²ˆë§Œ ìƒì„±ë˜ë¯€ë¡œ ìµœì´ˆ `text` ìƒíƒœì¸ ë¹ˆ ê°’ ë§Œ ë³´ì—¬ì§€ê²Œ ë©ë‹ˆë‹¤.

hookì€ fiber íŠ¸ë¦¬ì—ì„œ _ì‹¤ì œ ê°ˆê³ ë¦¬ì²˜ëŸ¼_ ì˜ì¡´ì„± dataë¥¼ ê°€ì ¸ì˜¤ê¸° ë•Œë¬¸ì— ëª…ì‹œì  ì˜ì¡´ì„± ë³€ê²½ì´ ì—†ë‹¤ë©´ ì—…ë°ì´íŠ¸ ë  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

ë”°ë¼ì„œ `text`ë¥¼ deps ë°°ì—´ì— ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤.

```jsx
const send = React.useCallback(() => {
  console.log('send:', text);
}, [text]);
```

ê·¸ëŸ¬ë‚˜... `text` ì˜ì¡´ì„±ì´ ìˆëŠ” í•œ ë¦¬ë Œë”ë§ ë¬¸ì œë¥¼ í”¼í•  ìˆ˜ëŠ” ì—†ìŠµë‹ˆë‹¤.

### 2. useEffectëŠ” ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ê°€ ë³€ê²½ë  ë•Œ ì¬ì‹¤í–‰ë˜ì„  ì•ˆë©ë‹ˆë‹¤.

ì´ë²ˆ ì˜ˆì‹œì—ì„œ `Chat` ì»´í¬ë„ŒíŠ¸ê°€ ìˆìŠµë‹ˆë‹¤.
`Chat` ì»´í¬ë„ŒíŠ¸ëŠ” roomì— ì—°ê²°ë  ë•Œ ëª‡ ê°€ì§€ íš¨ê³¼ë¥¼ ê°€ì§‘ë‹ˆë‹¤.

roomì— ë“¤ì–´ê°€ê±°ë‚˜ ë©”ì‹œì§€ë¥¼ ë°›ì„ ë•Œ ì„ íƒëœ `theme`ì„ ê°€ì§„ toastë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.
ê·¸ë¦¬ê³  `muted` ì…‹íŒ…ì— ë”°ë¼ ì‚¬ìš´ë“œë¥¼ ë°œìƒí•©ë‹ˆë‹¤.

```jsx
function Chat({ selectedRoom }) {
  const [muted, setMuted] = useState(false);
  const theme = useContext(ThemeContext);

  useEffect(() => {
    const socket = createSocket('/chat/' + selectedRoom);
    socket.on('connected', async () => {
      await checkConnection(selectedRoom);
      showToast(theme, 'Connected to ' + selectedRoom);
    });
    socket.on('message', (message) => {
      showToast(theme, 'New message: ' + message);
      if (!muted) {
        playSound();
      }
    });
    socket.connect();
    return () => socket.dispose();
  }, [selectedRoom, theme, muted]); // ğŸŸ¡ ì˜ì¡´ì„± ì¤‘ í•˜ë‚˜ë¼ë„ ë³€ê²½ë˜ë©´ ì¬ ì‹¤í–‰ë©ë‹ˆë‹¤.
  // ...
}
```

ìœ„ ì—ì‹œì˜ ë¬¸ì œëŠ” `theme`ì´ë‚˜ `muted` ìƒíƒœê°€ ë³€ê²½ë  ë•Œë§ˆë‹¤ `useEffect`ê°€ ì¬ì‹¤í–‰(ì†Œì¼“ ì¬ì—°ê²°)ì´ ë°œìƒí•œë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. `theme`, `muted`ê°€ effect ë‚´ë¶€ì—ì„œ ì‚¬ìš©ë˜ë¯€ë¡œ ì˜ì¡´ì„± ë°°ì—´ì— ì„ ì–¸ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. ê·¸ë˜ì„œ ê·¸ ì¤‘ í•˜ë‚˜ë¼ë„ ë³€ê²½ëœë‹¤ë©´ `useEffect`ëŠ” ì¬ì‹¤í–‰ë˜ê³  ì†Œì¼“ì„ destroy, recreating í•˜ê²Œ ë©ë‹ˆë‹¤.

ì†Œì¼“ callbackì„ `useEffect` ë°–ìœ¼ë¡œ ì˜®ê¸°ê³  `useCallback`ìœ¼ë¡œ ê°ì‹¸ë”ë¼ë„ ì˜ì¡´ì„± ë°°ì—´ì—ëŠ” `theme`, `muted`ë¥¼ í¬í•¨í•´ì•¼ í•˜ê³ , `useEffect`ëŠ” ì´ callbackì„ ì˜ì¡´í•˜ê¸°ì— ì—¬ì „íˆ ë™ì¼í•˜ê²Œ `useEffect`ëŠ” ì¬ì‹¤í–‰ë©ë‹ˆë‹¤.

```jsx
  const onConnected = useCallback((connectedRoom) => {
    showToast(theme, 'Connected to' + connectedRoom);
  }, [theme]);

  const onMessage = useCallback((message) => {
    showToast(theme, 'New message: ' + message);
    if (!muted) {
      playSound();
    }
  }, [muted]);

  useEffect(() => {
    ...
    socket.on('connected', async () => {
      await checkConnection(selectedRoom);
      onConnected(selectedRoom);
    });
    socket.on('message', onMessage);
    ...
  }, [selectedRoom, onConnected, onMessage]);
```

ì¬ìƒì„±, ì¬ì‹¤í–‰ì„ ë§‰ê¸° ìœ„í•´ `theme`, `muted`ë¥¼ ì˜ì¡´ì„± ë°°ì—´ì—ì„œ ì œê±°í•œë‹¤ë©´ ì›í•˜ëŠ” ë™ì‘ì„ í•˜ì§€ ëª»í•©ë‹ˆë‹¤. ì´ˆê¸° ê°’ ë§Œì„ ê³„ì† ë³´ê²Œ ë  ê²ƒì…ë‹ˆë‹¤. themeì„ ë³€ê²½í•˜ë”ë¼ë„ ë°”ë€Œì§€ ì•Šì„ ê²ƒì´ë©°, ìŒì†Œê±°ë¥¼ í–ˆë”ë¼ë„ ì‚¬ìš´ë“œëŠ” ê³„ì†í•´ì„œ ë“¤ë¦´ ê²ƒì…ë‹ˆë‹¤.

## useEvent()

> RFCë‹¨ê³„ì´ë©° ì •ì‹ ë²„ì „ì— ê³§ ë¦´ë¦¬ì¦ˆ ë  ê²ƒìœ¼ë¡œ...

```jsx
useEvent(handler);
```

ìœ„ ë¬¸ì œë“¤ë¡œ ì¸í•´ `useEvent()` ë“±ì¥í•˜ê²Œ ë©ë‹ˆë‹¤.

memoizeëœ callback(`useCallback`)ì„ ë°˜í™˜í•˜ëŠ” hookì…ë‹ˆë‹¤.

`useEvent()` hook [ê°„ëµí•œ ë‚´ë¶€ êµ¬í˜„](https://github.com/reactjs/rfcs/blob/useevent/text/0000-useevent.md#internal-implementation)ì„ ë³´ë©´ Refë¥¼ í†µí•´ êµ¬í˜„í•©ë‹ˆë‹¤.

```jsx
function useEvent(handler) {
  const handlerRef = useRef(null);

  // layout effect ì „ì— ì‹¤í–‰ í•©ë‹ˆë‹¤.
  useLayoutEffect(() => {
    handlerRef.current = handler;
  });

  return useCallback((...args) => {
    // ë Œë”ë¦¬ ì¤‘ì— í˜¸ì¶œë˜ë©´ ì—ëŸ¬ë¥¼ throw í•©ë‹ˆë‹¤.
    const fn = handlerRef.current;
    return fn(...args);
  }, []);
}
```

> concurrent modeì—ì„œ refë¥¼ ì…‹íŒ…í•˜ëŠ” ê²ƒì€ ì•ˆì „í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— layout effectì „ì— í•´ì•¼í•©ë‹ˆë‹¤.
>
> 1. ì „ë‹¬ëœ handlerì„ ë‹´ì„ refë¥¼ ì„ ì–¸í•˜ê³ 
> 2. useLayoutEffectë¥¼ í†µí•´ refì— ì „ë‹¬ëœ handlerì„ ë‹´ìŠµë‹ˆë‹¤.
> 3. ì´ê²ƒ(refì— ë‹´ê¸´ handler)ì„ í˜¸ì¶œí•˜ëŠ” í•¨ìˆ˜ë¥¼ useCallbackìœ¼ë¡œ ê°ì‹¸ì„œ ë°˜í™˜í•©ë‹ˆë‹¤.

ë‹¤ì‹œ ë§í•´, ì „ë‹¬í•œ í•¨ìˆ˜ì˜ ìµœì‹  ë²„ì „ì„ í˜¸ì¶œí•˜ëŠ” ì•ˆì •ì ì¸ í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤.

`useEvent` ì‹¤ì œ êµ¬í˜„ì€ ìœ„ ì½”ë“œì™€ ëª‡ ê°€ì§€ ì°¨ì´ì ì´ ìˆìŠµë‹ˆë‹¤.

ì£¼ì„ì—ì„œ ì‘ì„±ë˜ì–´ ìˆì§€ë§Œ ë Œë”ë§ ì‹œì— í˜¸ì¶œì´ ë˜ë©´ ì—ëŸ¬ë¥¼ throwí•©ë‹ˆë‹¤.
(`useEffect`ì—ì„œ í˜¸ì¶œë˜ê±°ë‚˜ ë‹¤ë¥¸ ì‹œê¸°ì— í˜¸ì¶œë˜ëŠ” ê²ƒì€ ê´œì°®ìŠµë‹ˆë‹¤.)

ê·¸ë˜ì„œ ë Œë”ë§ ë™ì•ˆì—ëŠ” ì´ í•¨ìˆ˜ëŠ” ë¶ˆíˆ¬ëª…(opaque)í•˜ê²Œ ì²˜ë¦¬ë˜ë©° ì ˆëŒ€ í˜¸ì¶œë˜ì§€ ì•Šë„ë¡ ê°•ì œí•©ë‹ˆë‹¤.

"í˜„ì¬" ë²„ì „ì˜ handlerëŠ” ëª¨ë“  layout effectê°€ ë™ì‘í•˜ê¸° ì „ì— ë°”ë€ë‹ˆë‹¤.
ì´ë¥¼ í†µí•´, ì–´ëŠ í•œ ì»´í¬ë„ŒíŠ¸ì˜ effectê°€ ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ ìƒíƒœì˜ ì´ì „ ë²„ì „ì„ ë³¼ ìˆ˜ ìˆëŠ” ë¬¸ì œ(userland's pitfall)ë¥¼ í”¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

> ("í˜„ì¬" handlerë¡œ ë³€ê²½ë˜ëŠ” ì •í™•í•œ ì‹œì ì€ [ë¯¸í•´ê²° ìƒíƒœ](https://github.com/reactjs/rfcs/blob/useevent/text/0000-useevent.md#unresolved-questions)ì…ë‹ˆë‹¤.)

ê·¸ë ‡ë‹¤ë©´ ì´ `useEvent`ë¥¼ í†µí•´ ìœ„ ë¬¸ì œë“¤ì„ ì–´ë–»ê²Œ í•´ê²°í•  ìˆ˜ ìˆì„ê¹Œìš”?

### 1. ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì—ì„œ states/propsë¥¼ ì½ëŠ” ê²ƒì€ ìµœì í™”ë¥¼ ë°©í•´í•©ë‹ˆë‹¤.

```tsx
const send = useEvent(() => {
  console.log('send:', text);
});
```

`send`í•¨ìˆ˜ë¥¼ `useEvent()`ë¡œ ê°ì‹¸ì„œ ì²˜ë¦¬í•˜ëŠ” ê²ƒìœ¼ë¡œ ê°„ë‹¨í•˜ê²Œ ê°€ëŠ¥í•©ë‹ˆë‹¤.
textê°€ ë°”ë€Œì–´ë„ í•¨ìˆ˜ê°€ ì¬ìƒì„±ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

### 2. useEffectëŠ” ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ê°€ ë³€ê²½ë  ë•Œ ì¬ì‹¤í–‰ë˜ì„  ì•ˆë©ë‹ˆë‹¤.

```jsx
  // âœ… Stable
  const onConnected = useEvent(connectedRoom => {
    showToast(theme, 'Connected to ' + connectedRoom);
  });

  // âœ… Stable
  const onMessage = useEvent(message => {
    showToast(theme, 'New message: ' + message);
    if (!muted) {
      playSound();
    }
  });

  useEffect(() => {
    ...
    socket.on('connected', async () => {
      await checkConnection(selectedRoom);
      onConnected(selectedRoom);
    });
    socket.on('message', onMessage);
    ...
  }, [selectedRoom]); // âœ… roomì´ ë°”ë€” ë•Œì—ë§Œ ì¬ì‹¤í–‰ë©ë‹ˆë‹¤.
```

`useEvent`ë¥¼ onConnected í•¨ìˆ˜ì™€ onMessage í•¨ìˆ˜ë¥¼ `useCallback` ëŒ€ì‹  ì‚¬ìš©í•˜ì—¬ ì˜ì¡´ì„±ì„ ì œê±°í•˜ì˜€ìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ `useEffect`ì—ì„œ ì˜ì¡´ì„±ë„ ì œê±°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì´ë¥¼ í†µí•´

- `theme`, `muted`ê°€ ë°”ë€Œì–´ë„ í•¨ìˆ˜ê°€ ì¬ìƒì„±ë˜ì§€ ì•Šìœ¼ë©°
- `selectedRoom`ì´ ë°”ë€” ë•Œë§Œ `useEffect`ê°€ ì¬ì‹¤í–‰ë©ë‹ˆë‹¤.

## ì£¼ì˜í•´ì•¼ í•  ì 

> render ì‹œì— í˜¸ì¶œë˜ëŠ” í•¨ìˆ˜ì¸ ê²½ìš°ì—” ì—¬ì „íˆ useCallbackì„ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.

`useEvent`ëŠ” React Refë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— concurrent ê¸°ëŠ¥ì— ì˜í–¥ì„ ì¤„ ìˆ˜ ìˆê¸°ì— ë Œë”ë§ ì‹œì— í˜¸ì¶œë˜ë©´ ì•ˆë©ë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´ `renderItem` callbackì€ `useEvent`ë¥¼ ì‚¬ìš©í•˜ë©´ ì•ˆë©ë‹ˆë‹¤. ëŒ€ì‹  `useCallback`ì„ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.

```jsx
function ThemedGrid() {
  const theme = useContext(ThemeContext);
  const renderItem = useCallback(
    (item) => {
      // ë Œë”ë§ ì‹œ í˜¸ì¶œë˜ê¸°ì— ì´ë²¤íŠ¸ê°€ ì•„ë‹™ë‹ˆë‹¤.
      return <Row {...item} theme={theme} />;
    },
    [theme]
  );
  return <Grid renderItem={renderItem} />;
}
```

> linter: callbackì•ì— on, handleì´ ë¶™ì€ callbackì¸ ê²½ìš°ì— `useEvent`ë¥¼ ì‚¬ìš©í•´ì•¼ í•˜ëŠ” ê²ƒì„ lintí•˜ë„ë¡

## ì—¼ë ¤ë˜ëŠ” ì 

- **Reactì— ìƒˆë¡œìš´ ê°œë…ì´ ì¶”ê°€ë˜ëŠ” ì ì…ë‹ˆë‹¤.**
  - ì‚¬ëŒë“¤ì€ ì´ë¯¸ ìƒˆë¡œìš´ í•¨ìˆ˜ ì •ì˜ì™€ ê´€ë ¨ëœ ì‚¬ë¡€("`useCallback`ì„ ëª¨ë“  ê³³ì— ì‚¬ìš©í•´ì•¼ë˜ë‚˜ìš”?")ë¡œ ì–´ë ¤ì›€ì„ ê²ªê³  ìˆìŠµë‹ˆë‹¤.
  - ê·¸ëŸ¬ë‚˜ `useEvent`ê°€ ì‹¤ì œ ì‚¬ìš©ì—ì„œ ë¶ˆê°€í”¼í•˜ë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤. ì™œëƒí•˜ë©´ first-class API, ê³µìœ ëœ í‘œí˜„, ë² ìŠ¤íŠ¸ practicesì˜ ì´ì ë“¤ ë•Œë¬¸ì…ë‹ˆë‹¤.
- **ì¼ë°˜ì ì¸ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì™€ ë¹„êµí–ˆì„ ë•Œ `useEvent`ë¡œ ê°ì‹¸ëŠ” ê²ƒì€ ë” ì‹œë„ëŸ¬ì›Œë³´ì…ë‹ˆë‹¤.**
  - ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ê°€ ì•„ë‹Œ ë™ì¼í•œ ë¬¸ì œë¥¼ ìœ„í•´ ì‚¬ìš©í•˜ëŠ” `useCallback`ê³¼ ë¹„êµí•´ì•¼ í•©ë‹ˆë‹¤. `useEvent`ëŠ” ì¢€ ë” ì‚¬ìš©í•˜ê¸° í¸í•˜ê²Œ ê°œì„ ë˜ì—ˆìŠµë‹ˆë‹¤.(ì˜ì¡´ì„± ë°°ì—´ ì—†ìŒ, invalidation ì—†ìŒ). ë˜í•œ ì„ íƒ ì‚¬í•­ì´ë¯€ë¡œ ì›í•˜ëŠ” ê²½ìš° ì½”ë“œë¥¼ ê·¸ëŒ€ë¡œ ìœ ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- **`useEvent`ë¼ëŠ” ëª…ì¹­, DOM ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë³´ë‹¤ ë” ë„“ì€ ìš©ì–´ë¥¼ í¬í•¨í•©ë‹ˆë‹¤.**
  - `useStableCallback`ì´ë‚˜ `useCommittedCallback`ìœ¼ë¡œë„ ë¶€ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ìš”ì ì€ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì— ì‚¬ìš©í•˜ë„ë¡ ê¶Œì¥í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.
- **`useCallback`ì— ë¹„êµí•´ì„œ `useEvent`ëŠ” commit ë‹¨ê³„ì—ì„œ ì¶”ê°€ì ì¸ ì‘ì—…ì´ í•„ìš”í•©ë‹ˆë‹¤.**
  - ê·¸ëŸ¬ë‚˜ ì‹¤ì œë¡œ ì´ëŸ¬í•œ íŒ¨í„´ì€ ì´ë¯¸ ë§ì´ ì‚¬ìš©ë˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ëŸ° ì‚¬ë¡€ë¥¼ ê°€ì§„ ë§ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì™€ ì œí’ˆì´ ì¡´ì¬í•˜ì§€ë§Œ íƒ€ì´ë° ë¬¸ì œë¡œ ê³ í†µë°›ëŠ” ì†”ë£¨ì…˜ ë³´ë‹¤ ì „ë°˜ì ìœ¼ë¡œ ë” ë‚˜ì€ ê²ƒì²˜ëŸ¼ ë³´ì…ë‹ˆë‹¤.
- **ëª‡ ê°€ì§€ ì—£ì§€ ì¼€ì´ìŠ¤ê°€ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ í¬ê²Œ ë¬¸ì œê°€ ìˆì§„ ì•Šì„ ê±°ë¼ê³  ìƒê°í•©ë‹ˆë‹¤.**
  - `useEvent`ì—ì„œì˜ "í˜„ì¬" ë²„ì „ì˜ ê°’ì€ "í˜¸ì¶œ" ë‹¹ì‹œì˜ ê°’ì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ì´ê²ƒì´ ì§„ì •í•œ "ë¼ì´ë¸Œ" ë°”ì¸ë”©ì„ ì–»ì§€ ëª»í•œë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ ì´ìœ ë¡œ ì´ë²¤íŠ¸ëŠ” ì¼ë°˜ì ìœ¼ë¡œ ë¹„ë™ê¸°ì‹ì´ ë˜ë©´ ì•ˆë©ë‹ˆë‹¤. ë‹¨ì§€ fire-and-forget(ë°œìƒì‹œí‚¤ê³  ìŠì–´ë²„ë ¤ë¼)ìœ¼ë¡œ ë‹¤ë£¨ëŠ”ê²Œ ê°€ì¥ ì¢‹ìŠµë‹ˆë‹¤.
  - `onSomething={cond ? handler1 : handler2}`ì™€ ê°™ì€ "ì¡°ê±´ë¶€ ì´ë²¤íŠ¸" ê²½ìš°ì— `onSomething`ì´ ì˜ì¡´ì„±ì— í¬í•¨ë˜ì–´ìˆë‹¤ë©´ `cond`ê°€ ë³€ê²½ë  ë•Œ ì¬ì‹¤í–‰ ë  ê²ƒì…ë‹ˆë‹¤. `useEvent`ë¡œ ê°ì‹¼ë‹¤ë©´ "ë³´í˜¸"í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## Alternative(?): useRefData

> _- [Alternative to useEvent](https://jser.dev/react/2022/05/07/alternatives-to-useevent.html)_

refë¥¼ ì´ìš©í•˜ì—¬ ëŒ€ì²´í•  ìˆ˜ ìˆëŠ” hookì„ ë§Œë“¤ì–´ë³´ë©´ì„œ ë” ì´í•´í•´ë³´ë ¤ í•©ë‹ˆë‹¤.

```tsx
const [text, setText] = React.useState('');
const textRef = React.useRef(text);

React.useLayoutEffect(() => {
  textRef.current = text;
}, [text]);

const send = React.useCallback(() => {
  console.log('send:', textRef.current);
}, []);
```

> concurrent modeì—ì„œ refë¥¼ ì…‹íŒ…í•˜ëŠ” ê²ƒì€ ì•ˆì „í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— useEffectë³´ë‹¤ ë” ì´ë¥¸ì‹œê¸°ì— ë™ì‘í•˜ëŠ” useLayoutEffectì—ì„œ ì‚¬ìš©í•©ë‹ˆë‹¤.

ìœ„ ì½”ë“œëŠ” ì˜ ë™ì‘í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ë” ë§ì€ ìƒíƒœë¥¼ ê´€ë¦¬í•´ì•¼ëœë‹¤ë©´ ì–´ë–¨ê¹Œìš”?
ì½”ë“œëŠ” ë” ëª»ìƒê²¨ì§ˆ ê²ƒì´ê³  ê´€ë¦¬ëŠ” ë” ì–´ë ¤ì›Œì§‘ë‹ˆë‹¤.

ê·¸ë˜ì„œ ì¬ì‚¬ìš©ê°€ëŠ¥í•œ hookìœ¼ë¡œ ë‹¤ì‹œ ë§Œë“¤ì–´ë³´ìë©´,

```jsx
function useRefData(data) {
  const ref = React.useRef(data);
  React.useLayoutEffect(() => {
    ref.current = data;
  }, [data]);
  return ref;
}
```

```jsx
const textRef1 = useRefData(text1);
const textRef2 = useRefData(text2);

const send = React.useCallback(() => {
  console.log('send:', textRef1.current, textRef2.current);
}, []);
```

`useRefData`ë¼ëŠ” hookì„ ë§Œë“¤ì–´ ì¡°ê¸ˆ ë” ë³´ê¸° ì¢‹ì•„ë³´ì´ê²Œ ë°”ê¾¸ì–´ ë³´ì•˜ìŠµë‹ˆë‹¤.
ê·¸ëŸ¬ë‚˜ ì—¬ì „íˆ "ì•„ë¦„ë‹µì§„" ì•ŠìŠµë‹ˆë‹¤. í•œ ê°œì˜ dataë§Œ ë°›ì„ ìˆ˜ ìˆê¸°ë„ í•˜ê³  ë§ì€ ìƒíƒœê°€ ìˆì„ ë• ì—¬ì „íˆ ëª»ìƒê²¼ìŠµë‹ˆë‹¤.

```jsx
function useRefData(...args) {
  const refs = args.map(React.useRef);
  React.useLayoutEffect(() => {
    for (let i = 0; i < args.length; i++) {
      refs[i].current = args[i];
    }
  }, args);

  return React.useCallback(() => refs.map((ref) => ref.current), []);
}
```

```jsx
const getData = useRefData(text1, text2);

const send = React.useCallback(() => {
  const [text1, text2] = getData();
  console.log('send:', text1, text2);
}, [getData]);
```

`useEvent`ì™€ ë§¤ìš° í¡ì‚¬í•œ ëŠë‚Œì…ë‹ˆë‹¤. `useEvent`ì™€ ë¹„êµí•´ì„œ ê±°ì˜ ë™ì¼í•œ ê°œë…ì  êµ¬í˜„ì„ ê°€ì§‘ë‹ˆë‹¤.

```jsx
const rawCallback = () => {
  console.log('send:', text1, text2);
};

const callback = useRefData(rawCallback)()[0];
```

1. `useRefData`: ì…ë ¥ ë°ì´í„°ë¥¼ ì•ˆì •í™”
2. `useEvent`: ì‚¬ìš©ì„ ì•ˆì •í™”

ì–´ë–¤ ê²ƒì´ ë” ë‚˜ì•„ë³´ì´ë‚˜ìš”?

1. `useRefData`: ì´í•´í•˜ê¸° ì‰½ì§€ë§Œ ë§ì¹˜ê¸°ë„ ì‰½ìŠµë‹ˆë‹¤.
2. `useEvent`: ì¶”ê°€ì ì¸ ì´í•´ê°€ í•„ìš”í•˜ì§€ë§Œ ê´€ë¦¬í•˜ê¸° ë” ì‰½ìŠµë‹ˆë‹¤.

## ë§ˆë¬´ë¦¬í•˜ë©°

`useCallback`ê³¼ ì˜ì¡´ì„± ë¬¸ì œë¡œ ì¸í•´ì„œ `Ref`ë¥¼ ê°€ë” ì‚¬ìš©í•˜ë©´ì„œ ì‹œê°„ì„ ê½¤ ì†Œë¹„í•  ê²½ìš°ê°€ ë§ì•˜ëŠ”ë° ì´ hookì´ ë‚˜ì˜¨ë‹¤ë©´ í›¨ì”¬ ê°„ë‹¨í•˜ê²Œ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆì„ ê²ƒ ê°™ë‹¤ëŠ” ìƒê°ì´ ë“­ë‹ˆë‹¤.

ë‹¤ë§Œ ìœ„ì—ë„ ì‘ì„±ë˜ì–´ìˆë“¯ì´ ì ì  ë” ë³µì¡í•´ì§€ëŠ” ëŠë‚Œì€ ë“­ë‹ˆë‹¤.
(~~ë‚˜ë§Œ ê·¸ëŸ°ê±¸ ìˆ˜ë„...~~)

ëª…ì¹­ì— Eventê°€ ë“¤ì–´ê°€ì„œ ì•½ê°„ í—·ê°ˆë¦´ ìˆ˜ë„ ìˆì„ ê²ƒ ê°™ì€ë° ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì— ì£¼ë¡œ ì‚¬ìš©ë˜ë„ë¡ ê¶Œì¥í•˜ê¸°ì— ê´œì°®ì„ ê²ƒ ê°™ê¸°ë„ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ ê²ƒë„ ë§ˆì°¬ê°€ì§€ë‹ˆê¹Œ ì–´ëŠì •ë„ ëª…ì¹­ì— ìµìˆ™í•´ì§€ë©´ ìì—°ìŠ¤ëŸ½ê²Œ ë°›ì•„ë“¤ì—¬ì§€ì§€ ì•Šì„ê¹Œ ì‹¶ìŠµë‹ˆë‹¤.

ë‹¤ìŒì—ëŠ” ì´ì „ í¬ìŠ¤íŠ¸ì— React Deep Diveí•˜ëŠ” ê¸€ì— ì´ì–´ì„œ ì¨ë³¼ê¹Œ ì‹¶ìŠµë‹ˆë‹¤.

> ì—¬ë‹´ì´ê¸´í•œë° ìµœê·¼ì— RNì„ ë§Œì§€ê³  ìˆëŠ”ë° ë„¤ì´í‹°ë¸Œìª½ì€ ì˜ ëª¨ë¥´ê² ë„¤ì—¬ ã„·ã„·
> ê·¼ë° Flutter3ê°€ ë‚˜ì™”ë‹¤ê³  í•˜ë‹ˆ ë­”ê°€... Flutterë¥¼ í•´ë³¼ê»„ ê·¸ë¬ë‚˜ ì‹¶ê¸°ë„ í•˜ê³ ...
> ìš”ìƒŒ ì´ëŸ¬ê³  ìˆìŠµë‹ˆë‹¤. ã…

## reference

- https://github.com/reactjs/rfcs/blob/useevent/text/0000-useevent.md
- https://jser.dev/react/2022/05/07/alternatives-to-useevent.html
