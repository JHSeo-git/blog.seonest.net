---
title: 'Remix ë§›ë³´ê¸° (1)'
description: 'Remixì— ëŒ€í•´ í•œ ë²ˆ ì‚´í´ë³´ê¸° ìœ„í•´ì„œ ê³µì‹ ì˜ˆì œë¥¼ ë”°ë¼ê°€ë©° Remixì— ëŒ€í•´ì„œ ì‚´í´ë³´ì•˜ìŠµë‹ˆë‹¤. 2ê°œ í¬ìŠ¤íŠ¸ë¡œ ë‚˜ëˆ ì„œ ì‘ì„±í•´ë³´ì•˜ê³  ì´ ê¸€ì€ ì²« ë²ˆì§¸ ê¸€ì…ë‹ˆë‹¤.'
date: '2022-06-26T12:57:16.955Z'
category: 'react'
tags: ['React', 'Remix', 'Web']
thumbnail: '/post/react/remix-ë§›ë³´ê¸°-1/thumbnail.png'
---

React 18ì´ ì—…ë°ì´íŠ¸ ë˜ë©´ì„œ ë‹¤ì–‘í•œ SSR í”„ë ˆì„ì›Œí¬ì—ì„œ ë°œ ë¹ ë¥´ê²Œ ì›€ì§ì´ê³  ìˆìŠµë‹ˆë‹¤.

ë§ì€ íšŒì‚¬ì™€ íŒ€ì´ ì–´ë–»ê²Œ í•˜ë©´ ë” ì‰½ê²Œ React SSRì„ ì œê³µí•  ê²ƒì¸ì§€ ê³ ë¯¼í•˜ê³  ê·¸ê±¸ ê¸°ë°˜ìœ¼ë¡œ í”„ë¡œëª¨ì…˜ í•˜ê³  ìˆìŠµë‹ˆë‹¤.

ì´ ë¶„ì•¼ì˜ ê°•ìë“¤ì€ Gatsby, Vercelì˜ Next.js ì •ë„ê°€ ìƒê°ë‚˜ë„¤ìš”. ì´ 2ê°œëŠ” í•œ ë²ˆì •ë„ ë§›ë³´ê¸°ë„ í–ˆê³  ì´ ë¸”ë¡œê·¸ ë˜í•œ Next.jsë¡œ ë§Œë“¤ì–´ì ¸ìˆìŠµë‹ˆë‹¤.(~~ì €ì˜ ìµœì•  í”„ë ˆì„ì›Œí¬ì…ë‹ˆë‹¤~~)

ìµœê·¼ì— ë˜ ë‹¤ë¥¸ ê°•ìê°€ ë‚˜íƒ€ë‚¬ëŠ”ë° Remix ì…ë‹ˆë‹¤. RemixëŠ” ì›ë˜ ìœ ë£Œë¡œ ì¶œì‹œí–ˆìŠµë‹ˆë‹¤. 2020ë…„ 4ì›”ì— Remixë¥¼ ë°œí‘œí•˜ê³  2021ë…„ 11ì›” í”„ë¡œì íŠ¸ë¥¼ ì˜¤í”ˆ ì†ŒìŠ¤í™” í•˜ë©´ì„œ ì •ì‹ ë¦´ë¦¬ì¦ˆ ë˜ì—ˆìŠµë‹ˆë‹¤. (~~ì •ì‹ ë¦´ë¦¬ì¦ˆê°€ ë²Œì¨ 7ê°œì›” ì •ë„ ë˜ì—ˆë„¤ìš”... ì–¼ë§ˆì „ì— ë“¤ì€ ê²ƒ ê°™ì€ë°...~~)

RemixíŒ€ì€ react-routerë¥¼ ë§Œë“¤ê¸°ë„ í–ˆìŠµë‹ˆë‹¤. í˜„ì¬ ì´ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì•ˆì“°ëŠ” react í”„ë¡œì íŠ¸ê°€ ì—†ë‹¤ê³  í•´ë„ ê³¼ì–¸ì´ ì•„ë‹ì •ë„ë¡œ ë§ì´ ì‚¬ìš©ë˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ì…ë‹ˆë‹¤. ìµœê·¼ì— v6ê°€ ë‚˜ì˜¤ê¸°ë„ í–ˆê³ , react-router v6ê°€ Remix íŒŒì¼ ê¸°ë°˜ ë¼ìš°íŒ…ì— ì‚¬ìš©ëœë‹¤ê³  í•˜ë„¤ìš”.
(Next.jsëŠ” ì´ ë¶€ë¶„ì—ì„œ remixì™€ ì°¨ì´ê°€ ë‚˜ëŠ”ë° ì¤‘ì²© ë ˆì´ì•„ì›ƒ + ì¤‘ì²© ë¼ìš°íŒ…ì´ next.jsì—ì„œëŠ” ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ìµœê·¼ì— ê³µê°œëœ [Layouts RFC](https://nextjs.org/blog/layouts-rfc)ì— ë”°ë¥´ë©´ ì´ ë¶€ë¶„ì„ í•´ê²°í•˜ê¸° ìœ„í•œ ëª¨ìŠµì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.)

| **gatsby** vs **next** vs **remix** npm trends                              |
| --------------------------------------------------------------------------- |
| ![npm-trend](https://files.seonest.net/images/qnfqnfqnf/post/272/image.png) |

ì•„ì§ì€ ìœ„ 2ê°œì— ë¹„í•´ ì ì€ ì ìœ ìœ¨ì„ ê°€ì§€ì§€ë§Œ ì‚¬ìš© í›„ê¸°ê°€ ì¢‹ì•„ì„œ í•œ ë²ˆ ë§›ë³´ë ¤ê³  í•©ë‹ˆë‹¤.

> ì´ ë¸”ë¡œê·¸ë„ ì—…ê·¸ë ˆì´ë“œ í•  ê²¸ ë‹¤ì–‘í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ìŠ¤í„°ë”” ì¤‘ì— ìˆìŠµë‹ˆë‹¤.
> ë‹¤ìŒ í”„ë ˆì„ì›Œí¬ê°€ Remixê°€ ë ì§€ë„ ëª¨ë¥´ëŠ” ê¸°ëŒ€ê°ì— ì´ë²ˆì— ë§›ë³´ë ¤ê³  í•©ë‹ˆë‹¤.

## í”„ë ˆì„ì›Œí¬ vs ë¼ì´ë¸ŒëŸ¬ë¦¬

ì œê°€ ëŠë¼ëŠ” ê°€ì¥ í° ì°¨ì´ëŠ” `ë‚´ê°€ ëŒ€ìƒì„ í˜¸ì¶œí•˜ëŠ”ê°€? ëŒ€ìƒì´ ë‚˜ë¥¼ í˜¸ì¶œí•˜ëŠ”ê°€?` ì…ë‹ˆë‹¤.

Reactë¥¼ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¼ê³  í•˜ëŠ” ì´ìœ ëŠ” Reactê°€ ë‚˜ì˜ ì½”ë“œë¥¼ í˜¸ì¶œí•˜ì—¬ ë¬´ì–¸ê°€ ì™„ì„±ì‹œí‚¤ì§€ ì•ŠìŠµë‹ˆë‹¤. ë‹¨ì§€ ë‚˜ì˜ ì½”ë“œê°€ React ì½”ë“œë¥¼ í˜¸ì¶œí•˜ê³  í”„ë¡œê·¸ë¨ì„ ì™„ì„±í•©ë‹ˆë‹¤.

ê·¸ëŸ¬ë‚˜ Next.js ê°™ì€ ê²½ìš° `pages` í´ë” ì•„ë˜ì— ë¼ìš°íŠ¸ íŒŒì¼ì„ ë§Œë“¤ì–´ì•¼ í•˜ë©°, ì„œë²„ì‚¬ì´ë“œë Œë”ë§ì„ ìœ„í•´ `getServerSideProps`ë¥¼ export í•´ì•¼í•œë‹¤ë˜ì§€, ì •ì  htmlì„ customí•˜ê¸° ìœ„í•´ì„œëŠ” `_document.js` íŒŒì¼ì„ ìƒì„±í•˜ì—¬ ìˆ˜ì •ëœ ì½”ë“œë¥¼ ë§Œë“¤ì–´ ë†“ì•„ì•¼í•˜ëŠ” ê²ƒ ë“±ì´ ìˆìŠµë‹ˆë‹¤. Next.js í”„ë ˆì„ì›Œí¬ê°€ ë‚˜ì˜ ì½”ë“œë¥¼ í˜¸ì¶œí•˜ì—¬ í”„ë¡œê·¸ë¨ì„ ì™„ì„±í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

ì €ëŠ” í”„ë ˆì„ì›Œí¬ì™€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì°¨ì´ë¥¼ ì´ë ‡ê²Œ ìƒê°í•˜ê³  ìˆìœ¼ë©° ì•„ì§ê¹Œì§€ëŠ” ì´ ì´í•´ê°€ í¬ê²Œ ë¬¸ì œë¥¼ ì¼ìœ¼í‚¨ ì ì€ ì—†ì—ˆë˜ ê²ƒ ê°™ìŠµë‹ˆë‹¤.

ì´ë²ˆì— ë§›ë³¼ Remix ë˜í•œ í”„ë ˆì„ì›Œí¬ì…ë‹ˆë‹¤.

íŠœí† ë¦¬ì–¼ì„ ì§„í–‰í•˜ë©´ì„œ Remixë¥¼ ì•Œì•„ë³´ë ¤ê³  í•©ë‹ˆë‹¤.

## Getting Started

> https://remix.run/
> ì‚¬ì´íŠ¸ë¥¼ ì°¸ ì¬ë°Œê²Œ ì˜ ë§Œë“  ê²ƒ ê°™ì•„ìš”.

![remix-hero](https://files.seonest.net/images/qnfqnfqnf/post/271/image.png)

Remixì—ì„œ ì¢‹ì€ ì¸ìƒì„ ë°›ì€ ê²ƒ ì¤‘ í•˜ë‚˜ê°€ ê³µì‹ ë¬¸ì„œì…ë‹ˆë‹¤.

ë¬¸ì„œê°€ ì˜ ë˜ì–´ìˆê³ (ê°œì¸ì ì´ì§€ë§Œ), íŠœí† ë¦¬ì–¼ í”„ë¡œì íŠ¸ê°€ ë§¤ìš° ì˜ ë˜ì–´ìˆìŠµë‹ˆë‹¤.

ì´ í¬ìŠ¤íŠ¸ë„ íŠœí† ë¦¬ì–¼ í”„ë¡œì íŠ¸ë¥¼ ê±°ì˜ ë”°ë¼ê°€ë©´ì„œ ì‘ì„±í•´ë³´ë ¤ê³  í•©ë‹ˆë‹¤.

## create-remix

RemixëŠ” `create-react-app`ì²˜ëŸ¼ í…œí”Œë¦¿ì„ ì œê³µí•©ë‹ˆë‹¤.

```bash
npx create-remix@latest
```

Remixì—ì„œëŠ” ì¡°ê¸ˆ ë” íŠ¹ë³„(?)í•œ í…œí”Œë¦¿ì´ ìˆëŠ”ë° [stack](https://remix.run/docs/en/v1/pages/stacks) í…œí”Œë¦¿ì…ë‹ˆë‹¤. ë§ì´ ì‚¬ìš©ë˜ëŠ” ê¸°ìˆ  stack ëª¨ìŒì„ ë‚˜ëˆ„ì–´ì„œ ì œê³µí•˜ëŠ”ë°... ê½¤ ì‹ ì„ í–ˆìŠµë‹ˆë‹¤.

### Stack (by music-genre)

> ë¸”ë£¨ìŠ¤, ì¸ë””, ê·¸ëŸ°ì§€(ì–¼í„°ë„¤ì´í‹°ë¸Œ ë¡ì˜ í•œ ì¥ë¥´, ie. ë„ˆë°”ë‚˜) ìŒì•… ì¥ë¥´ë¡œ êµ¬ë¶„í•´ë†“ì€ê²Œ ì°¸ ì¬ë°ŒìŠµë‹ˆë‹¤.

- [The Blues Stack](https://github.com/remix-run/blues-stack): edge(distributed)ì— ë°°í¬ë˜ëŠ” ê±¸ ê¸°ë³¸ìœ¼ë¡œ ì‘ì„±ëœ í…œí”Œë¦¿ ì…ë‹ˆë‹¤. postgreSQL DBë¥¼ ì‚¬ìš©í•˜ê³  Node.js ì„œë²„ ê¸°ë°˜ì¸ ìˆ˜ë°±ë§Œëª… ìœ ì €ê°€ ì‚¬ìš©í•˜ëŠ” ê±°ëŒ€í•˜ê³  ë¹ ë¥¸ ìš´ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì œê³µí•˜ê¸° ìœ„í•´ ë§Œë“¤ì–´ì§„ í…œí”Œë¦¿ì…ë‹ˆë‹¤.
- [The Indie Stack](https://github.com/remix-run/indie-stack): persistent SQLite DBë¥¼ ì‚¬ìš©í•˜ê³  Node.js ì„œë²„ì— ë°°í¬ë˜ëŠ” ê±¸ ê¸°ë³¸ìœ¼ë¡œ ì‘ì„±ëœ í…œí”Œë¦¿ì…ë‹ˆë‹¤. ë¸”ë¡œê·¸, ë§ˆê²ŒíŒ…, ì½˜í…ì¸  ì‚¬ì´íŠ¸ì²˜ëŸ¼ ë™ì  ë°ì´í„°ë¥¼ ê°€ì§„ ì›¹ì‚¬ì´íŠ¸ì— ìµœì ì…ë‹ˆë‹¤. MVP, prototype, POC í•˜ëŠ”ë° ì™„ë²½í•˜ê³  ê°„ë‹¨í•œ bootstrap í…œí”Œë¦¿ì…ë‹ˆë‹¤. ê·¸ë¦¬ê³  ë‚˜ì¤‘ì— Blues Stackìœ¼ë¡œë„ ì‰½ê²Œ ì—…ë°ì´íŠ¸ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- [The Grunge Stack](https://github.com/remix-run/grunge-stack): Node.jsë¥¼ ë™ì‘í•˜ëŠ” ì„œë²„ë¦¬ìŠ¤ functionì— ë°°í¬ë˜ëŠ” ê±¸ ê¸°ë³¸ìœ¼ë¡œ ì‘ì„±ëœ í…œí”Œë¦¿ì…ë‹ˆë‹¤. persistent DynamoDBë¥¼ ì‚¬ìš©í•˜ê³  AWS infraì— ìˆ˜ë°±ë§Œ ìœ ì €ê°€ ì‚¬ìš©í•˜ëŠ” ìš´ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•˜ê¸° ìœ„í•´ ë§Œë“¤ì–´ì§„ í…œí”Œë¦¿ì…ë‹ˆë‹¤.

ì•ìœ¼ë¡œë„ ë” ë§Œë“¤ì–´ì§ˆ ì˜ˆì •ì´ê³  ê°€ëŠ¥í•˜ë‹¤ë©´ ì»¤ìŠ¤í…€ìœ¼ë¡œ Stackì„ ë§Œë“¤ê³  ì‚¬ìš©í•˜ê¸¸ ì›í•œë‹¤ê³  í•˜ë„¤ìš”. ê·¸ëŸ¬ë©´ì„œ ìŒì•…ì¥ë¥´ë¡œ Stackì„ ë§Œë“ ê²ƒ ì²˜ëŸ¼ ì„œë¸Œ ì¥ë¥´ë¡œ Stack ì´ë¦„ì„ ì§€ì–´ë‹¬ë¼ í•œê²ƒë„ ë§¤ìš° ì¬ë°ŒìŠµë‹ˆë‹¤.

RemixëŠ” ê³µì‹ë¬¸ì„œì—ì„œ 2ê°œì˜ íŠœí† ë¦¬ì–¼ì„ ì œê³µí•©ë‹ˆë‹¤.

- Developer Blog
- Jokes App

2ê°œ ì¤‘ì— Jokes App íŠœí† ë¦¬ì–¼ì´ ì¢€ ë” ì´í•´í•˜ê¸° ì¢‹ë‹¤ê³  ëŠê»´ì ¸ì„œ ì´ íŠœí† ë¦¬ì–¼ë¡œ ë§›ë³´ê¸°ë¥¼ í•´ë³´ê² ìŠµë‹ˆë‹¤.

## Tutorial

> ëª¨ë“  ì†ŒìŠ¤ ì½”ë“œëŠ” ì•„ë˜ì™€ ê³µì‹ ë¬¸ì„œë¥¼ ì°¸ê³ í•˜ì‹œë©´ ë©ë‹ˆë‹¤.
>
> - https://remix.run/docs/en/v1/tutorials/jokes
> - https://github.com/JHSeo-git/remix-fire-tutorial/blob/main/apps/remix-jokes-app/README.md

```bash
npx create-remix@latest
# or yarn create remix@latest
```

ì¹œì ˆí•œ @remix/cli ë•ë¶„ì— ì†ì‰½ê²Œ í”„ë¡œì íŠ¸ë¥¼ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- typescriptë¥¼ ì‚¬ìš©í• ì§€?
- ì–´ë””ì— ë°°í¬í•  ì˜ˆì •ì¸ì§€?
- ë“±ë“±

ì—¬ëŸ¬ í¸ì˜ ì˜µì…˜ì„ ì œê³µí•´ì£¼ê³  ê·¸ì— ë§ê²Œ í”„ë¡œì íŠ¸ êµ¬ì„±ì„ í•´ì£¼ëŠ”ë° ìƒë‹¹íˆ ë§¤ë ¥ìˆê²Œ ë˜ì–´ìˆëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤.

ë‹¤ì–‘í•œ ì„œë²„ í™˜ê²½ ì˜µì…˜ë„ ì„ íƒí•  ìˆ˜ ìˆìœ¼ë©° í¬í•¨í•˜ì—¬ êµ¬ì„±í•´ì¤ë‹ˆë‹¤.

- Remix App Server: [Express](https://expressjs.com/)ì— ê¸°ë°˜ì„ ë‘” full featured Node.js Server
- Express
- Architect (AWS Lambda)
- Fly.io
- Deno
- Netlify
- Vercel
- Cloudflare Workers
- Cloudflare Pages

ì‚¬ìš©í•  ì£¼ìš” ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

- [tailwindcss](https://tailwindcss.com/docs/installation) + [daisyui](https://daisyui.com/): css styles
- [prisma](https://www.prisma.io/docs/) + [SQLite](https://www.sqlite.org/index.html): orm + Database

### tailwindcss + daisyui

> ìŠ¤íƒ€ì¼ì„ ê·¸ëŒ€ë¡œ ì˜®ê²¨ì„œ ì¨ë„ ë˜ëŠ”ë° daisyuië¥¼ í•œ ë²ˆ ì¨ë³´ê³  ì‹¶ì–´ì„œ ì´ì°¸ì— í•œ ë²ˆ ì´ê²ƒë„ ê°™ì´ ë§›ë³´ë ¤ê³  í•©ë‹ˆë‹¤.

tailwindcssëŠ” ì›Œë‚™ ìœ ëª…í•˜ê³  ê°„í¸í•˜ê²Œ ì„¤ì •í•  ìˆ˜ ìˆì–´ì„œ ìì£¼ ì‚¬ìš©ë©ë‹ˆë‹¤.

ì¶”ê°€í•´ì„œ daisyuië¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•´ë³´ë ¤ê³  í•©ë‹ˆë‹¤. tailwindcss ê¸°ë°˜ìœ¼ë¡œ ë§Œë“¤ì–´ì§„ CSS ì»´í¬ë„ŒíŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì…ë‹ˆë‹¤.

```html
<!-- only tailwindcss -->
<button
  class="inline-block cursor-pointer rounded-md bg-gray-800 px-4 py-3 text-center text-sm font-semibold uppercase text-white transition duration-200 ease-in-out hover:bg-gray-900"
>
  Button
</button>

<!-- with daisyui -->
<button class="btn">Button</button>
```

### Development

`yarn dev`ë¥¼ ì‹¤í–‰í•˜ë©´ ì •ìƒì ìœ¼ë¡œ í˜ì´ì§€ë¥¼ í™•ì¸í•˜ì‹œë©´ ë©ë‹ˆë‹¤.

> **Note 1**
> React 18ì„ ì‚¬ìš©í•˜ê³ ì í•œë‹¤ë©´ react, react-domì„ ì—…ë°ì´íŠ¸í•˜ê³ , [ì—¬ê¸° ë¬¸ì„œ](https://remix.run/docs/en/v1/guides/migrating-react-router-app#creating-server-and-browser-entrypoints)ë¥¼ í™•ì¸í•˜ì—¬ ë”°ë¼í•˜ì‹œë©´ ë©ë‹ˆë‹¤.

> **Note 2**
> ê°œë°œì ë„êµ¬ì—ì„œ ì—ëŸ¬ê°€ ë°œìƒí•˜ë‚˜ìš”?
>
> `Warning: Expected server HTML to contain a matching <meta> in <head>`ì™€ ê°™ì€ ì—ëŸ¬ê°€ ë‚˜íƒ€ë‚œë‹¤ë©´ ì´ [ì´ìŠˆ](https://github.com/remix-run/remix/issues/2947)ë¥¼ í™•ì¸í•˜ì„¸ìš”.
>
> ì € ê°™ì€ ê²½ìš°ëŠ” í¬ë¡¬ ìµìŠ¤í…ì…˜ ì¤‘ì— `apollo dev tool`ì´ ì¶©ëŒì„ ì¼ìœ¼ì¼œì„œ ë‚˜íƒ€ë‚˜ëŠ” ë¬¸ì œì˜€ê³ , í•´ë‹¹ ìµìŠ¤í…ì…˜ì„ disable ì²˜ë¦¬í•˜ê³  ë‚˜ì„œëŠ” ì—ëŸ¬ê°€ ë‚˜íƒ€ë‚˜ì§„ ì•Šì•˜ìŠµë‹ˆë‹¤.

ë™ì‘ì´ ëœë‹¤ë©´ íŠœí† ë¦¬ì–¼ì„ ì§„í–‰í•˜ë©´ì„œ Remix ë§›ë³´ê¸° í•´ë³´ê² ìŠµë‹ˆë‹¤.

## Project Structure

create-remixë¥¼ í†µí•´ í”„ë¡œì íŠ¸ë¥¼ êµ¬ì„±í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ ëª¨ìŠµìœ¼ë¡œ êµ¬ì¡°ê°€ ì¡í™ë‹ˆë‹¤.

```bash
remix-jokes
â”œâ”€â”€ README.md
â”œâ”€â”€ app
â”‚   â”œâ”€â”€ entry.client.tsx
â”‚   â”œâ”€â”€ entry.server.tsx
â”‚   â”œâ”€â”€ root.tsx
â”‚   â””â”€â”€ routes
â”‚       â””â”€â”€ index.tsx
â”œâ”€â”€ package-lock.json
â”œâ”€â”€ package.json
â”œâ”€â”€ public
â”‚   â””â”€â”€ favicon.ico
â”œâ”€â”€ remix.config.js
â”œâ”€â”€ remix.env.d.ts
â””â”€â”€ tsconfig.json
```

- `app/`: ëª¨ë“  Remix app ì½”ë“œê°€ ì¡´ì¬í•˜ëŠ” í´ë”ì…ë‹ˆë‹¤.
- `app/entry.client.tsx`: ë¸Œë¼ìš°ì €ì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë¡œë“œí•  ë•Œ ê°€ì¥ ì²˜ìŒ ë™ì‘í•˜ëŠ” JavaScript ì…ë‹ˆë‹¤. [hydrate](https://reactjs.org/docs/react-dom.html#hydrate)ë¥¼ ìœ„í•´ ì´ íŒŒì¼ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
- `app/entry.server.tsx`: ì„œë²„ì— ìš”ì²­ì´ ì™”ì„ ë•Œ ê°€ì¥ ì²˜ìŒ ë™ì‘í•˜ëŠ” JavaScript ì…ë‹ˆë‹¤. RemixëŠ” í•„ìš”í•œ ëª¨ë“  ë°ì´í„° ë¡œë”©ì„ ë‹¤ë£¨ê³  ì‘ë‹µì„ í•  ì±…ì„ì„ ê°€ì§‘ë‹ˆë‹¤. ì´ íŒŒì¼ì„ ì‚¬ìš©í•˜ì—¬ React ì• í”Œë¦¬ì¼€ì´ì…˜ì„ string/streamìœ¼ë¡œ ë Œë”ë§í•˜ê³  ì´ë¥¼ í´ë¼ì´ì–¸íŠ¸ì— ì‘ë‹µí•©ë‹ˆë‹¤.
- `app/root.tsx`: ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë£¨íŠ¸ ì—˜ë¦¬ë¨¼íŠ¸ë¥¼ ë°°ì¹˜í•©ë‹ˆë‹¤. `<html>` ìš”ì†Œë¥¼ ì—¬ê¸°ì— ë Œë”ë§í•©ë‹ˆë‹¤.
- `app/routes/`: ëª¨ë“  "route ëª¨ë“ˆ"ì´ ì—¬ê¸°ì— ë“¤ì–´ê°‘ë‹ˆë‹¤. RemixëŠ” ì´ í´ë”ì•ˆì— ìˆëŠ” íŒŒì¼ë“¤ì„ ì‚¬ìš©í•˜ì—¬ íŒŒì¼ ì´ë¦„ì„ ê¸°ë°˜ìœ¼ë¡œ URL Routeë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
- `public/`: ì •ì  Assetì´ ì—¬ê¸°ì— ë“¤ì–´ê°‘ë‹ˆë‹¤.(ì´ë¯¸ì§€/Font/ê¸°íƒ€)
- `remix.config.js` Remixë¥¼ ì„¤ì •í•  ìˆ˜ ìˆëŠ” ì˜µì…˜ë“¤ì´ ìˆìŠµë‹ˆë‹¤.

root.tsx íŒŒì¼ì„ ì‚´í´ë³´ë©´ `<html>` ìš”ì†Œë¡œ ê°ì‹¸ì§„ ì»´í¬ë„ŒíŠ¸ë¥¼ exportí•˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì´ íŒŒì¼ì´ ì‹¤ì œë¡œ rootì— í•´ë‹¹í•˜ë©° ì„œë²„ì—ì„œ ìƒì„±ë˜ëŠ” htmlíŒŒì¼ì´ë¼ê³  ìƒê°í•˜ì‹œë©´ ë©ë‹ˆë‹¤.

> Next.jsëŠ” `_app.js`ì™€ `_document.js` íŒŒì¼ì„ ì´ìš©í•©ë‹ˆë‹¤.

```tsx
export default function App() {
  return (
    <html lang="en">
      <head>
        <Meta />
        <Links />
      </head>
      <body>
        <Outlet />
        <ScrollRestoration />
        <Scripts />
        <LiveReload />
      </body>
    </html>
  );
}
```

Remixì—ì„œ html ë Œë”ë¥¼ ìœ„í•´ ì œê³µë˜ëŠ” ì—¬ëŸ¬ê°€ì§€ ì»´í¬ë„ŒíŠ¸ë“¤ì´ ìˆìŠµë‹ˆë‹¤.

Remixê°€ SSR í”„ë ˆì„ì›Œí¬ë¼ëŠ” ê²ƒì„ ìŠì§€ ë§ˆì„¸ìš”. `<LiveReload>` ì»´í¬ë„ŒíŠ¸ëŠ” ê°œë°œ í•  ë•Œ ìœ ìš©í•©ë‹ˆë‹¤. ì†ŒìŠ¤ ë³€ê²½ì´ ë°œìƒí–ˆì„ ë•Œ ìë™ìœ¼ë¡œ refreshí•´ì£¼ëŠ” ì»´í¬ë„ŒíŠ¸ì…ë‹ˆë‹¤. ë¹Œë“œê°€ ë§¤ìš° ë¹ ë¥´ê¸°ë„ í•˜ê³  ì¢…ì¢… ì•Œì•„ì°¨ë¦¬ê¸°ë„ ì „ì— reloadë©ë‹ˆë‹¤.

RemixëŠ” ì»´íŒŒì¼ëŸ¬ë¡œ [esbuildë¥¼ ì‚¬ìš©](https://remix.run/docs/en/v1/pages/technical-explanation#compiler)í•©ë‹ˆë‹¤.

> Next.jsëŠ” í˜„ì¬ëŠ” SWCë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ì„¤ì •ì— ë”°ë¼ babel + webpackë„ ì‚¬ìš©ê°€ëŠ¥í•©ë‹ˆë‹¤.

### vs Next.js

ê°œì¸ì ì¸ ìƒê°ì„ ì¡°ê¸ˆ ë” ë¶™ì´ìë©´,

Next.jsëŠ” SSGì²˜ëŸ¼ ì •ì  ìƒì„±ì— ì§‘ì¤‘í•œ ëŠë‚Œì´ë¼ë©´, RemixëŠ” ì² ì €í•˜ê²Œ SSRì— ì§‘ì¤‘í•œ í”„ë ˆì„ì›Œí¬ë¼ëŠ” ëŠë‚Œì„ ë°›ì•˜ìŠµë‹ˆë‹¤.~~(ì˜ ëª°ë¼ì„œ ëŠë‚€ëŒ€ë¡œ ì‘ì„±í•œê±°ë‹ˆ ë¬´ì‹œí•˜ì…”ë„ ë©ë‹ˆë‹¤...)~~

ì´ë ‡ê²Œ ëŠë‚€ ì´ìœ ëŠ” Next.jsëŠ” ë¹Œë“œ ìµœì í™”(SWC ë„ì… ë“±)ì™€ ISRì²˜ëŸ¼ ì •ì  í˜ì´ì§€ì— ì§‘ì¤‘í•˜ëŠ” ëŠë‚Œì„ ë°›ì•˜ìŠµë‹ˆë‹¤.

ìµœê·¼ì— [Layout RFC](https://nextjs.org/blog/layouts-rfc)ì™€ ê°™ì€ React 18(íŠ¹íˆ Streaming HTML, RSC) ë„ì…ì„ ìœ„í•´ SSR ìª½ì—ë„ í˜ì„ ì‹£ëŠ” ê²ƒì²˜ëŸ¼ ë³´ì´ê¸´ í•©ë‹ˆë‹¤.~~(Remixë¥¼ ë§›ë³´ë‹¤ë³´ë‹ˆ "ì–´? ì´ê±° Next.jsì˜ ìµœê·¼ Layout RFC ëŠë‚Œê³¼ ìƒë‹¹íˆ ë¹„ìŠ·í•œë°?" ë¼ëŠ” ëŠë‚Œì„ ë°›ê¸´ í–ˆìŠµë‹ˆë‹¤.)~~

RemixëŠ” ë­”ê°€ ì˜›ë‚  ì›¹ ê°œë°œì˜ ëŠë‚Œ(?)ì´ ì‚´ì§ ë‚©ë‹ˆë‹¤. ë¶€ì •ì ì¸ ëŠë‚Œì´ ì•„ë‹Œ ë§ ê·¸ëŒ€ë¡œ ê·¸ ëŠë‚Œ ê·¸ëŒ€ë¡œ ì…ë‹ˆë‹¤.
ì™œ ê·¸ëŸ°ê°€ ìƒê°í•´ë³´ë‹ˆ HTML [Form](https://remix.run/docs/en/v1/api/remix#form)ì„ ì ê·¹ì ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤ë˜ì§€, Reactì™€ ê°™ì´ CSR ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ë„ˆë¬´ ìµìˆ™í•´ì ¸ë²„ë¦° ì œê°€ ì˜¤ë«ë™ì•ˆ ìŠê³  ìˆì—ˆë˜ ê²ƒ(Web Standards, HTTP, HTML)ë“¤ì„ ì‚¬ìš©í•´ì„œ ê·¸ëŸ° ê²ƒ ê°™ìŠµë‹ˆë‹¤.

RemixëŠ” ë˜í•œ êµ‰ì¥íˆ ë¹ ë¥´ê²Œ Reactì˜ ìƒˆë¡œìš´ ê¸°ìˆ ë“¤ì„ ë„ì…í•œ ëŠë‚Œë„ ë“­ë‹ˆë‹¤.
ì„œë²„/í´ë¼ì´ì–¸íŠ¸ ëª¨ë¸(`.server.js` / `.client.js`) ë„ì…ë„ ê·¸ë ‡ìŠµë‹ˆë‹¤. edge ì„œë²„ë¥¼ ìœ„í•œ API(cloudflare, vercel ë“±)... ì´ëŸ¬í•œ í–‰ë³´ê°€ ì•ìœ¼ë¡œì˜ í”„ë¡ íŠ¸ì—”ë“œ íŠ¸ë Œë“œì˜ ë°©í–¥ì„ ì•Œ ìˆ˜ ìˆëŠ” ì§€ì ì´ ë˜ëŠ” ê²ƒ ê°™ê¸°ë„ í•©ë‹ˆë‹¤.

ìµœê·¼ì— ê¸€ì„ ì˜®ê¸´ [Great Developer Experience](https://www.seonest.net/posts/Great-Developer-Experience) ì—ì„œ ìƒë‹¹íˆ ì¤‘ìš”í•œ ê°œë°œì ê²½í—˜ ìš”ì†Œê°€ ë§ì´ ë“¤ì–´ê°„ í”„ë ˆì„ì›Œí¬ë€ ìƒê°ì´ ë“¤ì—ˆìŠµë‹ˆë‹¤.

ê¸€ ì¤‘ê°„ì¤‘ê°„ì— ìì£¼ ì‚¬ìš©í–ˆë˜ Next.jsì™€ ë¹„êµí•´ë³´ë©´ì„œ ê°€ëŠ” ê²ƒë„ ì¬ë°Œì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.

## React 18

React 18 ë²„ì „ë„ [ì‰½ê²Œ ì ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.](https://github.com/remix-run/remix/discussions/2549)

- [react-dom/client](https://remix.run/docs/en/v1/guides/migrating-react-router-app#creating-server-and-browser-entrypoints): `hydrateRoot`ë¥¼ í†µí•œ Selective Hydration
- [react-dom/server](https://remix-react-18-streaming-production.up.railway.app/upgrading): `renderToPipeableStream`ì„ í†µí•œ Streaming HTML(edge runtimeì€ `renderToReadableStream`)

ëª‡ ê°€ì§€ ì½”ë“œë§Œ ë³€ê²½í•œë‹¤ë©´ ì‰½ê²Œ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## Routes

RemixëŠ” routesë¥¼ ë‹¤ë£¨ê¸° ìœ„í•´ 2ê°€ì§€ ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤.

- `remix.config.js`: programmatically
- `routes/` í´ë”ë¥¼ í†µí•œ "file-based routing"

`remix.config.js`ì—ì„œ í”„ë¡œê·¸ë¨ì ìœ¼ë¡œ routeë¥¼ ìƒì„±í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

```js
/** @type {import('@remix-run/dev').AppConfig} */
module.exports = {
  ...
  routes(defineRoutes) {
    return defineRoutes((route) => {
      route("/somewhere/cool/*", "route-a.tsx");
    });
  },
  ...
};
```

ê·¸ëŸ¬ë‚˜ ë” ì¼ë°˜ì ì¸ ë°©ë²•ìœ¼ë¡œ íŒŒì¼ ì‹œìŠ¤í…œì„ í†µí•œ Routeë¥¼ ë§Œë“¤ì–´ì„œ ì‚¬ìš©í•©ë‹ˆë‹¤. ì´ë¥¼ "íŒŒì¼ ê¸°ë°˜ ë¼ìš°íŒ…" ì´ë¼ê³  ë¶€ë¦…ë‹ˆë‹¤. `routes/` í´ë” ì•„ë˜ì— íŒŒì¼ì„ ë§Œë“¤ë©´ í”„ë ˆì„ì›Œí¬ê°€ ìë™ìœ¼ë¡œ url routeë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

> Next.jsì—ë„ íŒŒì¼ ê¸°ë°˜ ë¼ìš°íŒ…ì„ ì“°ê³  ìˆìŠµë‹ˆë‹¤.
> `pages/` í´ë” ì•„ë˜ì— íŒŒì¼ì„ ìƒì„±í•˜ë©´ í”„ë ˆì„ì›Œí¬ê°€ ìë™ìœ¼ë¡œ url routeë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

```bash
/
/jokes
/jokes/:jokeId
/jokes/new
/login
```

ìœ„ì™€ ê°™ì€ routeë¥¼ ë§Œë“¤ê¸° ìœ„í•´ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì€ ê²½ë¡œì™€ íŒŒì¼ì„ ìƒì„±í•©ë‹ˆë‹¤.

```bash
/index.tsx
/jokes.tsx
/jokes/index.tsx
/jokes/$jokeId.tsx
/jokes/new.tsx
/login.tsx
```

í˜¹ì‹œ íŠ¹ì´í•œì ì„ ì°¾ìœ¼ì…¨ë‚˜ìš”? routeì— í”¼í•´ íŒŒì¼ì´ í•˜ë‚˜ ë” ëŠ˜ì–´ë‚¬ìŠµë‹ˆë‹¤!!

ê·¸ ì´ìœ ëŠ” ì•„ë˜ì—ì„œ ì²œì²œíˆ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.

### nested route

> ì´ê²ƒì´ Remixë¥¼ ë§¤ë ¥ì ìœ¼ë¡œ ë§Œë“œëŠ” ê²ƒ ì¤‘ì— í•˜ë‚˜ë¼ê³  ìƒê°í•©ë‹ˆë‹¤.

ì¼ë‹¨ `/jokes` ë¼ìš°íŠ¸ì— í•´ë‹¹í•˜ëŠ” íŒŒì¼ë“¤ì„ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.

- `/jokes.tsx`
- `/jokes/index.tsx`
- `/jokes/$jokeId.tsx`
- `/jokes/new.tsx`

```tsx
// app/routes/jokes.tsx

import { Outlet } from '@remix-run/react';

export default function JokesRoute() {
  return (
    <div>
      <h1>JğŸ¤ªKES</h1>
      <main>
        <Outlet />
      </main>
    </div>
  );
}
```

react-router-dom V6ë¥¼ ì‚¬ìš©í•´ë³´ì‹  ë¶„ì´ë¼ë©´ `<Outlet />` ì„ ì¨ë³´ì…¨ì„ ê²ë‹ˆë‹¤.

nested routeì— ëŒ€í•´ì„œ ë¶€ëª¨ routeì—ì„œ ìì‹ routeë¥¼ êµ¬ì„±í•˜ê¸° ìœ„í•œ ì»´í¬ë„ŒíŠ¸ì…ë‹ˆë‹¤.

RemixëŠ” ì´ë¥¼ íŒŒì¼ êµ¬ì¡°ë¥¼ í†µí•´ í˜„ëª…í•˜ê²Œ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

ì»´í¬ë„ŒíŠ¸ë¡œ ì„¤ëª…í•˜ìë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

```tsx
// /jokes/$jokeId

<Root>
  <Jokes>
    <JokesJokeId />
  </Jokes>
</Root>

// /jokes/new

<Root>
  <Jokes>
    <JokesNew />
  </Jokes>
</Root>
```

[nested route](https://remix.run/docs/en/v1/guides/routing#what-is-nested-routing)ëŠ” ì¤‘ìš”í•œ ì•„ì´ë””ì–´ ì…ë‹ˆë‹¤.

ìì‹ routeì—ì„œ contentê°€ ë³€ê²½ë˜ì—ˆë‹¤ê³  í•˜ë”ë¼ë„ ë¶€ëª¨ routeì— ìˆëŠ” contentëŠ” persist í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ layout hierarchyëŠ” ì •í™•íˆ routeì— ë§¤ì¹­ë˜ë©° **route module**ì— ì˜í•´ ì •ì˜ë©ë‹ˆë‹¤.

ì´ëŸ° êµ¬ì¡°ë¥¼ í†µí•´ ì§ê´€ì ìœ¼ë¡œ êµ¬í˜„í•  ìˆ˜ ìˆê³ , `routes/`ë¥¼ í†µí•œ code-splittingì„ Remixê°€ [ìë™ìœ¼ë¡œ í•´ì¤ë‹ˆë‹¤.](https://remix.run/docs/en/v1/guides/migrating-react-router-app#reactlazy-and-reactsuspense)

### dynamic segment

> `/jokes/$jokeId.tsx`

Remixì—ëŠ” **dynamic segment**ì— ëŒ€í•œ ì»¨ë²¤ì…˜ì´ ìˆìŠµë‹ˆë‹¤.

íŒŒì¼ëª…ì˜ prefixë¡œ `$`ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ì´ê²ƒì€ Remixê°€ í•´ë‹¹ url segmentì— ëŒ€í•´ ì–´ë–¤ ê°’ë„ ë§¤ì¹­í•œë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.

ì—¬ê¸°ì„œëŠ” `$jokesId.tsx`ë¥¼ ë§Œë“¤ì—ˆê³ , urlì´ `/jokes/1111...`ê³¼ ê°™ì€ ê²½ìš° ë§¤ì¹­ë˜ì–´ ë Œë”ë§ë©ë‹ˆë‹¤.

ì•„ë˜ì—ì„œ ë” ìì„¸í•˜ê²Œ ë‹¤ë£¨ê² ì§€ë§Œ loader, actionì˜ `params` propê³¼ `useParams`ë¥¼ í†µí•´ì„œ paramì— ì ‘ê·¼í•´ì„œ `1111...` ê°’ì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- `params.jokesId`: íŒŒì¼ëª…ê³¼ ë™ì¼í•œ paramëª…ì„ ê°€ì§‘ë‹ˆë‹¤.

```tsx
import { useParams } from '@remix-run/react';

export function loader({ params }) {
  const id = params.jokesId;
}

export function action({ params }) {
  const id = params.jokesId;
}

export default function JokesIdRoute() {
  const params = useParams();
  const id = params.jokesId;
}
```

> Next.jsëŠ” array ì»¨ë²¤ì…˜ì„ í†µí•œ dynamic routeë¥¼ í‘œí˜„í•©ë‹ˆë‹¤.
> `app/jokes/[jokeId].tsx`

### Splats

ì¡°ê¸ˆ ë” Remix ì»¨ë²¤ì…˜ì„ ì‚´í´ë³´ë©´, [Splats](https://remix.run/docs/en/v1/guides/routing#splats) ë¼ëŠ” ê²ƒì„ ì œê³µí•©ë‹ˆë‹¤.

Splatì€ ë³„í‘œë¼ëŠ” ëœ»ìœ¼ë¡œ ì“°ì´ëŠ”ë°(asteriskë¡œë„ ë§ì´ ì”ë‹ˆë‹¤) Remixì—ì„œ splat routeëŠ” `$.jsx`ë¡œ íŒŒì¼ëª… ì»¨ë²¤ì…˜ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

ì´ê²ƒì´ ì˜ë¯¸í•˜ëŠ” ê²ƒì€ urlì˜ ë‚˜ë¨¸ì§€ ë¶€ë¶„ì— ëŒ€í•œ routeì— ëŒ€í•´ ëª¨ë‘ ì¼ì¹˜ì‹œí‚¨ë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.
dynamic segmentì™€ ë‹¬ë¦¬ splatì€ ë‹¤ìŒ `/`ì´ ë‚˜íƒ€ë‚˜ë„ ë¬´ì‹œí•˜ê³  route ëê¹Œì§€ì— ëŒ€í•´ ìº¡ì³í•©ë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´ ë‹¤ìŒê³¼ ê°™ì€ routeê°€ ìˆë‹¤ê³  ê°€ì •í•´ë³´ê² ìŠµë‹ˆë‹¤.

```bash
app
â”œâ”€â”€ root.jsx
â””â”€â”€ routes
    â”œâ”€â”€ files
    â”‚   â”œâ”€â”€ $.jsx
    â”‚   â”œâ”€â”€ mine.jsx
    â”‚   â””â”€â”€ recent.jsx
    â””â”€â”€ files.jsx
```

ë§Œì•½ URLì´ `example.com/files/images/work/flyer.jpg` ë¼ë©´ splat paramì€ `files/` ì´í›„ì˜ ëª¨ë“  urlì— ëŒ€í•´ ìº¡ì³í•©ë‹ˆë‹¤.

```jsx
// app/routes/files/$.jsx

export function loader({ params }) {
  params['*']; // "images/work/flyer.jpg"
}
```

ì½”ë“œì—ì„œëŠ” `params["*"]`ì„ í†µí•´ í•´ë‹¹ paramì— ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë˜í•œ sibling route(`/files/mine`ê³¼ ê°™ì€)ì— ëŒ€í•´ì„œë„ ë§¤ì¹­ë˜ì–´ ì‚¬ìš©ê°€ëŠ¥í•©ë‹ˆë‹¤.

ì´ íŒ¨í„´ì€ ì£¼ë¡œ `routes/$.jsx`ë¥¼ í†µí•´ loader ë°ì´í„°ë¥¼ ì´ìš©í•œ ì»¤ìŠ¤í…€ 404 í˜ì´ì§€ë¥¼ ë§Œë“œëŠ”ë° ì‚¬ìš©í•©ë‹ˆë‹¤.
(ì´ íŒŒì¼ì´ ì—†ë‹¤ë©´ RemixëŠ” root `CatchBoundary`ë¥¼ ë Œë”ë§í•©ë‹ˆë‹¤. `CatchBoundary`ëŠ” ì•„ë˜ì—ì„œ ë‹¤ì‹œ ë‹¤ë¤„ë³´ê² ìŠµë‹ˆë‹¤.)

### index route

> `/jokes/index.tsx`

ê·¸ëŸ°ë° `/jokes.tsx`ì™€ `/jokes/index.tsx`ëŠ” ë­˜ê¹Œìš”.

ì²˜ìŒì— ì´ëŸ° êµ¬ì¡°ë¥¼ ì ‘í–ˆì„ ë•Œ 2ê°œê°€ ë™ì‹œì— ì¡´ì¬í•  ìˆ˜ ì—†ë‹¤ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤.

ê·¸ë˜ì„œ index routeë¥¼ ì²˜ìŒì— ì´í•´í•˜ê¸° ì‰½ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ì²˜ìŒì—” ê½¤ ì‹œê°„ì´ ê±¸ë ¸ë˜ ê²ƒ ê°™ì•„ìš”.

ì¢€ ë” ì´í•´í•˜ê¸° ì‰½ê²Œ ì„¤ëª…í•˜ìë©´ ë¶€ëª¨ routeì— ëŒ€í•œ _default ìì‹ route_ ë¡œ ì´í•´í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. renderí•  ìì‹ routeê°€ ì—†ì„ ë•Œ renderí•˜ëŠ” index routeë¡œ ë§ì´ì£ .

```tsx
export default function JokesIndexRoute() {
  return (
    <div>
      <p>Here's a random joke:</p>
      <p>I was wondering why the frisbee was getting bigger, then it hit me.</p>
    </div>
  );
}
```

![nested-route](https://files.seonest.net/images/qnfqnfqnf/post/276/image.png)

ë˜í•œ index routeëŠ” "leaf route"ì…ë‹ˆë‹¤.

ë§‰ Remixë¥¼ ì‹œì‘í•˜ëŠ” ê°œë°œìë“¤ì´ ì£¼ë¡œ ì‹¤ìˆ˜ í•˜ëŠ” ê²ƒì´ global navë¥¼ ë Œë”ë§í•˜ê¸° ìœ„í•´ì„œ `app/routes/index.jsx`ì— ë„£ëŠ” ê²ƒì…ë‹ˆë‹¤. í•´ë‹¹ global navì€ `app/root.jsx`ì— ë§Œë“¤ì–´ì•¼ í•˜ë©° `/app/routes/*` ë‚´ë¶€ì˜ ëª¨ë“  ê²ƒì€ ì´ë¯¸ `app/root.jsx`ì˜ ìì‹ routeì´ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. `app/routes/index.jsx`ëŠ” "leaf route"ì´ë¯€ë¡œ global navë¥¼ ë³´ì—¬ì¤„ ìˆ˜ ì—†ëŠ” êµ¬ì¡°ì…ë‹ˆë‹¤.

ë‹¤ì‹œ ë§í•´ `app/routes/index.jsx`ëŠ” ì´ë¯¸ `app/root.jsx`ì˜ ìì‹ routeë¡œ ì¡´ì¬í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

> **Note**
> index routeëŠ” ìì‹ routeë¥¼ ê°€ì§ˆ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

#### `?index` Query Parameter

íŠ¹íˆ `<Form>`ì„ submití•  ë•Œ urlì— `?index` query paramì´ í‘œì‹œë˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì´ê²ƒì€ index routeë¥¼ ë¶€ëª¨ layout routeì™€ êµ¬ë³„í•˜ëŠ”ë° ì‚¬ìš©ë©ë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´ ë‹¤ìŒê³¼ ê°™ì€ routeê°€ ìˆë‹¤ê³  ê°€ì •í•´ë³´ê² ìŠµë‹ˆë‹¤.

```bash
â””â”€â”€ app
    â”œâ”€â”€ root.jsx
    â””â”€â”€ routes
        â”œâ”€â”€ jokes
        â”‚   â”œâ”€â”€ new.jsx
        â”‚   â”œâ”€â”€ index.jsx    <-- /jokes?index
        â”œâ”€â”€ jokes.jsx        <-- /jokes
```

ì•„ê¹Œ ì²˜ìŒì— ì´í•´ê°€ ì˜ ì•ˆëœë‹¤ê³  í‘œí˜„í–ˆë˜ ê²ƒì´ ì—¬ê¸°ì„œ í•´ê²°ëœ ê²ƒ ê°™ìŠµë‹ˆë‹¤.

ë™ì¼ routeë¥¼ ê°€ì§ˆ ê²ƒì´ë¼ê³  ìƒê°í–ˆëŠ”ë° ì´ë¥¼ RemixëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì»¨ë²¤ì…˜ìœ¼ë¡œ í•´ê²°í•©ë‹ˆë‹¤.

- url: `/jokes?index` -> `app/routes/jokes/index.jsx`
- url: `/jokes` -> `app/routes/jokes.jsx`

RemixëŠ” `?index` query paramì„ ë¶€ëª¨ layout route ëŒ€ì‹ ì— index routeë¥¼ ê°€ë¦¬í‚¬ ë•Œ ì‚¬ìš©í•œë‹¤ëŠ” ê²ƒì„ ì´í•´í•˜ë©´ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.

ë˜í•œ layout routeë‚˜ index routeì—ì„œ `<Form>`ì„ submití–ˆì„ ë•ŒëŠ” Remixê°€ ìë™ìœ¼ë¡œ í•¸ë“¤ë§í•©ë‹ˆë‹¤.(ìë™ìœ¼ë¡œ `?index` query paramì„ ë¶™ì—¬ì¤ë‹ˆë‹¤.)

ê·¸ëŸ¬ë‚˜ ë§Œì•½ ë‹¤ë¥¸ routeì—ì„œ formì„ submití•œë‹¤ë©´(`fetcher.submit` / `fetcher.load`ì™€ ê°™ì€) ì˜¬ë°”ë¥¸ routeë¡œ(layout route or index route) ë§ì¶”ê¸° ìœ„í•´ ì´ url íŒ¨í„´ì„ ì¸ì‹í•  í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤.

### without nesting layout

ë§Œì•½ nested layoutì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” url routeë¥¼ ë§Œë“¤ ê²½ìš°ëŠ” ì–´ë–»ê²Œ í•´ì•¼ë ê¹Œìš”?
(nested routeëŠ” ì‚¬ìš©í•©ë‹ˆë‹¤.)

RemixëŠ” ë§ˆì°¬ê°€ì§€ë¡œ íŒŒì¼ êµ¬ì¡°ë¡œ êµ¬ë¶„í•©ë‹ˆë‹¤.

```bash
â””â”€â”€ app
    â”œâ”€â”€ root.jsx
    â””â”€â”€ routes
        â”œâ”€â”€ sales
        â”‚   â”œâ”€â”€ invoices
        â”‚   â”‚   â””â”€â”€ $invoiceId.jsx
        â”‚   â””â”€â”€ invoices.jsx
        â”œâ”€â”€ sales.invoices.$invoiceId.edit.jsx ğŸ‘ˆ not nested
        â””â”€â”€ sales.jsx
```

- Nested files: nesting + nested urls
- Flat files: no nesting + nested urls

hierarchyí•˜ì§€ ì•Šê²Œ íŒŒì¼ì„ ë§Œë“¤ë©´ nesting layout ë˜ì§€ ì•ŠëŠ” íŒŒì¼ì´ ìƒì„±ë©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ nested routeëŠ” ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```jsx
// example.com/sales/invoices/2000/edit
<Root>
  <EditInvoice />
</Root>


// example.com/sales/invoices/2000
<Root>
  <Sales>
    <Invoices>
      <InvoiceId />
    </Invoices>
  </Sales>
</Root>
```

### Pathless Layout Routes

ì¶”ê°€ë¡œ í•˜ë‚˜ ë” ì»¨ë²¤ì…˜ì„ ì‚´í´ë³´ìë©´ [Pathless Layout Routes](https://remix.run/docs/en/v1/guides/routing#pathless-layout-routes)ê°€ ìˆìŠµë‹ˆë‹¤.

ë°±ì—”ë“œ ì„œë²„ë¥¼ ë§Œë“¤ ë•Œ authì™€ ê°™ì€ ë¯¸ë“¤ì›¨ì–´ë¥¼ ë§Œë“¤ì–´ ì‚¬ìš©í•´ë³´ì‹ ì  ìˆìœ¼ì‹ ê°€ìš”?

Remixì—ì„œëŠ” ì´ì™€ ê°™ì€ ê²ƒì„ pathless layout routesë¥¼ í†µí•´ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë‹¤ìŒê³¼ ê°™ì€ authentication routeê°€ ìˆë‹¤ê³  ê°€ì •í•´ë³´ê² ìŠµë‹ˆë‹¤.

```jsx
<Root>
  <Auth>
    <Login />
  </Auth>
</Root>
```

Login routeë¥¼ authentication í•˜ê¸° ìœ„í•´ì„œ Authë¥¼ ë¶€ëª¨ routeë¥¼ ê°€ì§„ nested routeë¥¼ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.

```bash
app
â”œâ”€â”€ root.jsx
â””â”€â”€ routes
    â”œâ”€â”€ auth
    â”‚   â”œâ”€â”€ login.jsx    <-- /auth/login
    â”‚   â”œâ”€â”€ logout.jsx   <-- /auth/logout
    â”‚   â””â”€â”€ signup.jsx   <-- /auth/signup
    â””â”€â”€ auth.jsx
```

ê·¸ëŸ°ë° ìš°ë¦¬ëŠ” `/auth/login`ê³¼ ê°™ì€ `/auth` prefixë¥¼ ê°€ì§„ urlì„ ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
ë‹¨ì§€ `/login` urlì„ ë§Œë“¤ê³  ì‹¶ìŠµë‹ˆë‹¤.

ì´ëŸ´ ê²½ìš° pathless routeë¥¼ í†µí•´ url nestingì—ì„œ ì œê±°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

`__auth`ì™€ ê°™ì€ `__` prefixë¥¼ ê°€ì§„ íŒŒì¼ì„ ë§Œë“ ë‹¤ë©´ í•´ë‹¹ íŒŒì¼ì€ url nestingì—ì„œ ì œê±°ë˜ì–´ `/login`ê³¼ ê°™ì€ urlì„ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```bash
app
â”œâ”€â”€ root.jsx
â””â”€â”€ routes
    â”œâ”€â”€ __auth
    â”‚   â”œâ”€â”€ login.jsx    <-- /login
    â”‚   â”œâ”€â”€ logout.jsx   <-- /logout
    â”‚   â””â”€â”€ signup.jsx   <-- /signup
    â””â”€â”€ __auth.jsx
```

## Database

ì´ ì˜ˆì œì—ì„œëŠ” Databaseë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
SQLite databaseë¥¼ ì‚¬ìš©í•˜ë©°, ORMìœ¼ë¡œ Prismaë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

PrismaëŠ” ì„¤ì •ë°©ë²•ë„ ê°„ë‹¨í•˜ê³  ìŠ¤í‚¤ë§ˆë¥¼ êµ¬ì„±í•˜ëŠ” ë²•ë„ ì§ê´€ì ì´ë‹ˆ í”„ë¡œì íŠ¸ì— ë„ì…í•˜ëŠ” ê²ƒë„ í•œ ë²ˆ ê³ ë ¤í•˜ëŠ” ê²ƒë„ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.

> ì‚¬ì‹¤ Prisma V1 ë•Œ ì‚´ì§ ì¨ë³¸ì ì´ ìˆëŠ”ë° ê·¸ ë•Œ ê²½í—˜ì´ ì¡°ê¸ˆ ì¢‹ì§€ ì•Šì•„ì„œ êº¼ë ¤í•˜ê³  ìˆë‹¤ê°€ ìµœê·¼ì— V2ë¥¼ ì‚¬ìš©í•´ë´¤ëŠ”ë° ë„ˆë¬´ ì˜ ë˜ì–´ìˆì–´ì„œ ê¹œì§ ë†€ëìŠµë‹ˆë‹¤.

prismaë¥¼ ì„¤ì¹˜í•˜ê³  ì´ë¥¼ í†µí•´ SQLiteë¥¼ ë§Œë“¤ì–´ë³´ê² ìŠµë‹ˆë‹¤.

### prisma init

```bash
yarn add -D prisma
yarn add @prisma/client
```

prisma init ì»¤ë§¨ë“œë¥¼ í†µí•´ ê°„ë‹¨í•˜ê²Œ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```bash
npx prisma init --datasource-provider sqlite
```

ê·¸ëŸ¬ë©´ ì•„ë˜ì™€ ê°™ì€ ê²½ë¡œì— íŒŒì¼ì´ ìƒì„±ë©ë‹ˆë‹¤.

- `prisma/schema.prisma`: ìŠ¤í‚¤ë§ˆ ì •ì˜ íŒŒì¼
- `.env`: DATABASE_URL í™˜ê²½ë³€ìˆ˜

```prisma
// prisma/schema.prisma

// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}
```

```bash
# .env
# Environment variables declared in this file are automatically made available to Prisma.
# See the documentation for more detail: https://pris.ly/d/prisma-schema#accessing-environment-variables-from-the-schema

# Prisma supports the native connection string format for PostgreSQL, MySQL, SQLite, SQL Server, MongoDB and CockroachDB.
# See the documentation for all the connection string options: https://pris.ly/d/connection-strings

DATABASE_URL="file:./dev.db"
```

Database ìŠ¤í‚¤ë§ˆëŠ” ë‹¤ìŒê³¼ ê°™ì´ schema.prisma íŒŒì¼ì— ì •ì˜ë˜ì–´ì ¸ì•¼ í•©ë‹ˆë‹¤.

```prisma
// prisma/schema.prisma

...
model Joke {
  id         String   @id @default(uuid())
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt
  name       String
  content    String
}
```

> prismaì˜ ì•„ì‰¬ìš´ì ì´ë¼ë©´ ì´ ìŠ¤í‚¤ë§ˆ íŒŒì¼ì„ ëª¨ë“ˆí˜•íƒœë¡œ êµ¬ì„±í•˜ëŠ”ê²Œ ì‰½ì§€ ì•Šë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.
> [ì—¬ê¸°](https://github.com/prisma/prisma/issues/2377#issuecomment-1149748518)ë¥¼ ë³´ë©´ ì»¤ë‹¤ë€ prismaíŒŒì¼ì´ ê³ í†µìŠ¤ëŸ½ë‹¤ë¼ëŠ” ê²ƒì„ ì´í•´í•˜ê³  ìˆì§€ë§Œ í˜„ì¬ ê³„íšëœ ì¼ì •ì—ëŠ” ì—†ë‹¤ê³  í•˜ë„¤ìš”. ê·¸ë˜ë„ ì–¸ì  ê°„ ì§€ì›í•˜ê²Œ ë˜ì§€ ì•Šì„ê¹Œ ìƒê°ë©ë‹ˆë‹¤.~~(ì´ ì´ìŠˆì™€ ë¹„ìŠ·í•œ ì´ìŠˆê°€ ì—„ì²­ë‚˜ê²Œ ë§ì€ ê±¸ ë³´ë‹ˆ...)~~

### prisma db push

```bash
npx prisma db push
```

ì´ ì»¤ë§¨ë“œë¥¼ ì‹¤í–‰í•˜ë©´ Databaseì— ìŠ¤í‚¤ë§ˆë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  node_moduleì•„ë˜ì— .prisma í´ë”ê°€ ìƒì„±ë˜ë©° í•´ë‹¹ ìŠ¤í‚¤ë§ˆë¥¼ ì½”ë“œì—ì„œ ì‰½ê²Œ ì“¸ ìˆ˜ ìˆê²Œ íƒ€ì…, ìœ í‹¸ ë“±ì„ ê°€ì§„ í´ë¼ì´ì–¸íŠ¸ íŒŒì¼ì´ ìƒì„±ë©ë‹ˆë‹¤.

![prisma-client1](https://files.seonest.net/images/qnfqnfqnf/post/277/image.png)

ì´ íŒŒì¼ì€ ì¶”ìƒí™”ëœ `@prisma/client` ëª¨ë“ˆì„ í†µí•´ ì‚¬ìš©ë©ë‹ˆë‹¤.

![prisma-client2](https://files.seonest.net/images/qnfqnfqnf/post/278/image.png)

```ts
import { PrismaClient } from '@prisma/client';
const db = new PrismaClient();
```

> ë§Œì•½ DBê°€ ì—‰ë§(?)ì´ ë˜ì—ˆë‹¤ë©´, `prisma/dev.db`ë¥¼ ì‚­ì œí•˜ê³  ë‹¤ì‹œ `npx prisma db push`ë¥¼ ì‹¤í–‰í•˜ë©´ ì´ˆê¸° DBë¥¼ ë‹¤ì‹œ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
> ë‹¹ì—°íˆ server ë˜í•œ ì¬ ì‹¤í–‰í•´ì•¼ ì •ìƒì ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### prisma db seed

prismaì—ëŠ” seed ì»¤ë§¨ë“œë¥¼ ì œê³µí•©ë‹ˆë‹¤. test dataë¥¼ ì‰½ê²Œ ìƒì„±í•˜ê¸° ìœ„í•œ ì»¤ë§¨ë“œì…ë‹ˆë‹¤.

prisma í´ë” ì•„ë˜ì— seed.ts íŒŒì¼ì„ ìƒì„±í•´ë´…ì‹œë‹¤.

```ts
// prisma/seed.ts

import { PrismaClient } from "@prisma/client";
const db = new PrismaClient();

async function seed() {
  await Promise.all(
    getJokes().map((joke) => {
      return db.joke.create({ data: joke });
    })
  );
}

seed();

function getJokes() {
  // shout-out to https://icanhazdadjoke.com/

  return [
    ...
  ];
}
```

ê¸°ë³¸ì ìœ¼ë¡œ node ëª…ë ¹ì–´ë¡œëŠ” TypeScriptë¥¼ ì½ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ì´ë¥¼ ìœ„í•´ `esbuild-register`ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
(ts-nodeë¥¼ ì„¤ì¹˜í•˜ê³  ì‚¬ìš©í•´ë„ ìƒê´€ì—†ìŠµë‹ˆë‹¤.)

```bash
yarn add -D esbuild-register
```

seed.tsë¥¼ ì‹¤í–‰í•´ë´…ì‹œë‹¤.

```bash
node --require esbuild-register prisma/seed.ts
```

ë¬¸ì œì—†ì´ ì‹¤í–‰ë˜ì—ˆë‹¤ë©´ test dataê°€ í…Œì´ë¸”ì— ìƒì„±ë©ë‹ˆë‹¤.

ê·¸ëŸ°ë° ë§¤ë²ˆ Databaseê°€ resetë  ë•Œë§ˆë‹¤ ì´ ì»¤ë§¨ë“œë¥¼ ë”°ë¡œ ì‹¤í–‰í•˜ëŠ” ê²ƒì€ ë³„ë¡œ í•©ë¦¬ì ì´ì§€ ëª»í•©ë‹ˆë‹¤. ìš´ì´ì¢‹ê²Œë„ prismaëŠ” ì´ë¥¼ ìœ„í•œ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.

package.jsonì— prisma.seed í•­ëª©ì— í•´ë‹¹ ì»¤ë§¨ë“œë¥¼ ë“±ë¡í•´ë‘ë©´ Databaseë¥¼ resetí•  ë•Œë§ˆë‹¤ ìë™ìœ¼ë¡œ prismaê°€ ì´ ì»¤ë§¨ë“œë¥¼ ì‹¤í–‰í•´ì¤ë‹ˆë‹¤.

```json
// package.json

// ...
  "prisma": {
    "seed": "node --require esbuild-register prisma/seed.ts"
  },
  "scripts": {
// ...
```

### Connect to the Database

```ts
import { PrismaClient } from '@prisma/client';
const db = new PrismaClient();
```

PrismaClient ê°ì²´ë¥¼ ìƒì„±í•˜ë©´ Databaseì— ì—°ê²°í•˜ëŠ” ê²ƒì€ ëì…ë‹ˆë‹¤.(ì°¸ ê°„í¸í•©ë‹ˆë‹¤!)

ê·¸ëŸ°ë° ê°œë°œí•  ë•Œ í•œ ê°€ì§€ ë¬¸ì œê°€ ìˆìŠµë‹ˆë‹¤.

ìš°ë¦¬ëŠ” ê°œë°œí•  ë•Œ ì„œë²„ë¥¼ restartí•  ê²½ìš°ê°€ ìƒë‹¹íˆ ë§ì€ë° ìœ„ ì½”ë“œê°€ ë§¤ë²ˆ ìƒì„±ëœë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ê·¸ëŸ¬ë©´ ê³„ì†í•´ì„œ Databaseì™€ ìƒˆë¡œìš´ ì—°ê²°ì„ ì‹œë„í•˜ê²Œë˜ê³  ì•„ë˜ì™€ ê°™ì€ ê²½ê³ ë¥¼ ë§Œë‚˜ê²Œ ë©ë‹ˆë‹¤.

> Warning: 10 Prisma Clients are already running

ê·¸ë˜ì„œ ìš°ë¦¬ëŠ” ì´ ë¬¸ì œë¥¼ í”¼í•˜ê¸° ìœ„í•´ í•œ ê°€ì§€ ì‘ì—…ì„ ë” í•©ë‹ˆë‹¤.

db ê°ì²´ ìƒì„±ì„ ì¬ ìƒì„±í•˜ì§€ ì•Šë„ë¡ í•˜ê¸° ìœ„í•´ `app/utils/db.server.ts`íŒŒì¼ì„ ë§Œë“¤ê³  ì•„ë˜ì™€ ê°™ì´ ì‘ì—…ì„ í•©ë‹ˆë‹¤.

```ts
// app/utils/db.server.ts

import { PrismaClient } from '@prisma/client';

let db: PrismaClient;

declare global {
  var __db: PrismaClient | undefined;
}

// this is needed because in development we don't want to restart
// the server with every change, but we want to make sure we don't
// create a new connection to the DB with every change either.
if (process.env.NODE_ENV === 'production') {
  db = new PrismaClient();
} else {
  if (!global.__db) {
    global.__db = new PrismaClient();
  }
  db = global.__db;
}

export { db };
```

íŒŒì¼ëª… ì»¨ë²¤ì…˜ì„ `.server`ë¥¼ ë¶™ì—¬ì„œ ìƒì„±í–ˆìŠµë‹ˆë‹¤.

RemixëŠ” ì„œë²„/í´ë¼ì´ì–¸íŠ¸ ëª¨ë¸ì„ íŒŒì¼ëª…ì„ ë³´ê³  íŒíŠ¸ë¥¼ ì–»ìŠµë‹ˆë‹¤. `.server`ê°€ ë¶™ì€ íŒŒì¼ì€ í´ë¼ì´ì–¸íŠ¸(ë¸Œë¼ìš°ì €)ì—ì„œ ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤ë¼ëŠ” ê²ƒì„ ì•Œë¦½ë‹ˆë‹¤.

ë‹¤ë§Œ ì´ê²ƒì€ ì„ íƒì‚¬í•­ì…ë‹ˆë‹¤. Remixê°€ ì•Œì•„ì„œ ì„œë²„ ì½”ë“œëŠ” í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë™ì‘í•˜ì§€ ì•Šë„ë¡ í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì¼ë¶€ ì„œë²„ ì „ìš© ë””íœë˜ì‹œê°€ tree-shakingí•˜ê¸° ì–´ë µê¸° ë•Œë¬¸ì— íŒŒì¼ëª…ì— `.server`ë¥¼ ë¶™ì—¬ì£¼ì–´ ì»´íŒŒì¼ëŸ¬ê°€ ë¸Œë¼ìš°ì €ë¥¼ ìœ„í•œ ëª¨ë“ˆì„ ë²ˆë“¤ë§í•  ë•Œ ì´ ëª¨ë“ˆì„ ì“°ì§€ ì•Šë„ë¡ í•˜ëŠ” íŒíŠ¸ê°€ ë©ë‹ˆë‹¤.

ì´ë¡œì¨ Database ì„¤ì •ë„ ëì´ ë‚¬ìŠµë‹ˆë‹¤. ì´ì œ ì´ ë°ì´í„°ë¥¼ ì½”ë“œì—ì„œ ì½ì–´ì„œ ì¨ì•¼ í•˜ëŠ”ë° Remixì—ì„œëŠ” ì–´ë–¤ ë°©ì‹ìœ¼ë¡œ í• ê¹Œìš”?

## Loading Data

> ì„œë²„ì—ì„œ ë™ì‘í•œë‹¤ëŠ” ê²ƒì„ ì¸ì‹í•´ì•¼ í•©ë‹ˆë‹¤.

- [loader](https://remix.run/docs/en/v1/api/conventions#loader)
- [useLoaderData](https://remix.run/docs/en/v1/api/remix#useloaderdata)

Remixì—ì„œëŠ” ë°ì´í„°ë¥¼ _load_ í•˜ê¸° ìœ„í•´ [loader](https://remix.run/docs/en/v1/api/conventions#loader)ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

ê·¸ë¦¬ê³  [useLoaderData](https://remix.run/docs/en/v1/api/remix#useloaderdata) hookì„ í†µí•´ React functionì—ì„œ ì‚¬ìš©ë©ë‹ˆë‹¤.

```tsx
import type { LoaderFunction } from '@remix-run/node';
import { json } from '@remix-run/node';
import { useLoaderData } from '@remix-run/react';
import type { User } from '@prisma/client';

import { db } from '~/utils/db.server';

type LoaderData = { users: Array<User> };

export const loader: LoaderFunction = async () => {
  const data: LoaderData = {
    users: await db.user.findMany(),
  };
  return json(data);
};

export default function Users() {
  const data = useLoaderData<LoaderData>();
  return (
    <ul>
      {data.users.map((user) => (
        <li key={user.id}>{user.name}</li>
      ))}
    </ul>
  );
}
```

`@remix-run/node`(or [other adapter](https://remix.run/docs/en/v1/other-api/adapter))ì—ì„œ ì œê³µí•˜ëŠ” `json` í•¨ìˆ˜ëŠ” serializable objectë¥¼ JSON Responseë¡œ ë³€ê²½í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤.

![json-type](https://files.seonest.net/images/qnfqnfqnf/post/279/image.png)

ìœ„ì— `db`ê°€ importëœ ê²½ë¡œë¥¼ ë³´ë©´ module alias(`~/utils/db.server`)ê°€ ëœ ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

RemixëŠ” tsconfig.jsonì„ í†µí•´ ê°„ë‹¨í•˜ê²Œ module aliasë¥¼ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
(Next.jsë„ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ module resolverë¥¼ ì œê³µí•©ë‹ˆë‹¤.)

```json
{
  "compilerOptions": {
    // ...
    "baseUrl": ".",
    "paths": {
      "~/*": ["./app/*"]
    }
    // ...
  }
}
```

### Data overfetching

REST APIë¥¼ ì„¤ê³„í•  ë•Œ ê³ ë ¤í•˜ëŠ” ê²ƒì¤‘ì— í•˜ë‚˜ê°€ Data overfetchingì…ë‹ˆë‹¤. í•„ìš”í•œ ë°ì´í„°ë³´ë‹¤ ë” ë§ì€ ë°ì´í„°ë¥¼ í˜¸ì¶œí•˜ê²Œë˜ëŠ” ê²½ìš°ë¥¼ ë§í•˜ëŠ”ë° Remixì—ì„œëŠ” ê·¸ëŸ° ê±±ì •ì„ í•˜ì§€ ì•Šì•„ë„ ë©ë‹ˆë‹¤.

route moduleì—ì„œ ì›í•˜ëŠ” ë°ì´í„°ë¥¼ ì •í™•íˆ ë§¤ì¹­í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

ê°€ë ¹ joke tableì—ì„œ "ìµœê·¼ì— ìƒì„±ëœ" / "ìƒìœ„ 5ê°œ í•­ëª©ì„" / "idì™€ ì´ë¦„ë§Œ" ê°€ì ¸ì˜¤ê³  ì‹¶ë‹¤ë©´ ì•„ë˜ì™€ ê°™ì´ ì§ì ‘ loaderë¥¼ ë³€ê²½í•´ì„œ ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤.

```ts
type LoaderData = {
  jokeListItems: Array<{ id: string; name: string }>;
};

export const loader: LoaderFunction = async () => {
  const data: LoaderData = {
    jokeListItems: await db.joke.findMany({
      take: 5,
      select: { id: true, name: true },
      orderBy: { createdAt: 'desc' },
    }),
  };
  return json(data);
};
```

> GraphQLì„ ë°±ì—”ë“œì—ì„œ ì‚¬ìš©í•˜ê³  ìˆë‚˜ìš”?
> Remixì˜ loaderë¥¼ í†µí•´ ì •í™•íˆ ë§¤ì¹­ëœ ë°ì´í„°ë¡œ í™”ë©´ì„ ë Œë”ë§í•˜ì„¸ìš”.
> [ê±°ëŒ€í•œ graphql í´ë¼ì´ì–¸íŠ¸](https://bundlephobia.com/package/graphql@16.0.1)ë¥¼ ë‚´ë ¤ì£¼ëŠ” ê²ƒì— ëŒ€í•´ ê±±ì •í•  í•„ìš”ê°€ ì—†ê¸° ë•Œë¬¸ì— í´ë¼ì´ì–¸íŠ¸ì—ì„œ ìˆ˜í–‰í•˜ëŠ” ê²ƒë³´ë‹¤ í›¨ì”¬ ë‚«ìŠµë‹ˆë‹¤.

> REST endpointë¥¼ ì‚¬ìš©í•˜ê³  ìˆë‚˜ìš”?
> ë§ˆì°¬ê°€ì§€ë¡œ Remixë¥¼ ì‚¬ìš©í•´ì„œ ë” ë‚˜ì€ ê²½í—˜ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
> ì „ë¶€ ì„œë²„ì—ì„œ ì¼ì–´ë‚˜ê¸° ë•Œë¬¸ì—, ë°±ì—”ë“œ ì—”ì§€ë‹ˆì–´ì—ê²Œ ì „ì²´ APIë¥¼ ë³€ê²½í•´ì•¼ëœë‹¤ê³  ì„¤ë“í•  í•„ìš” ì—†ì´ ì‰½ê²Œ í´ë¼ì´ì–¸íŠ¸ë¡œ ë³´ë‚´ëŠ” sizeë¥¼ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### Network Type Safety

ìš°ë¦¬ëŠ” `useLoaderData`ì—ì„œ ì œë„¤ë¦­ ìœ í˜•ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

```ts
type LoaderData = { users: Array<User> };

const data = useLoaderData<LoaderData>();
```

ì´ë¥¼ í†µí•´ íƒ€ì… ì™„ì „í•œ dataë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ `loader`ì™€ `useLoaderData`ê°€ ì™„ì „íˆ ë‹¤ë¥¸ í™˜ê²½(ì„œë²„/í´ë¼ì´ì–¸íŠ¸)ì—ì„œ ì‹¤í–‰ë˜ê¸° ë•Œë¬¸ì— ì‹¤ì œë¡œ Type Safetyë¥¼ ë³´ì¥í•˜ì§€ ëª»í•©ë‹ˆë‹¤.

ê·¸ë˜ì„œ ë°ì´í„°ê°€ ì •í™•í•˜ë‹¤ëŠ” ì‚¬ì‹¤ì„ 100% í™•ì‹ í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì€ `useLoaderData`ì—ì„œ ì–»ì€ ë°ì´í„°ì— ëŒ€í•´ [assertion í•¨ìˆ˜](https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-7.html#assertion-functions)ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤.

ë” ìì„¸í•œ ë°©ë²•ì€ ì—¬ê¸°ì„œ ë‹¤ë£¨ì§„ ì•Šì§€ë§Œ Type Safetyì— ëŒ€í•´ì„œ ì¸ì‹í•˜ê³  ìˆì–´ì•¼ í•©ë‹ˆë‹¤.

ë§Œì•½ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•œë‹¤ë©´ Remix ê³µì‹ ë¬¸ì„œì—ì„œëŠ” [zod](https://npm.im/zod) ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì¶”ì²œí•©ë‹ˆë‹¤.

## ë§ˆë¬´ë¦¬í•˜ë©°

> ëª¨ë“  ì†ŒìŠ¤ ì½”ë“œëŠ” ì•„ë˜ì™€ ê³µì‹ ë¬¸ì„œë¥¼ ì°¸ê³ í•˜ì‹œë©´ ë©ë‹ˆë‹¤.
>
> - https://remix.run/docs/en/v1/tutorials/jokes
> - https://github.com/JHSeo-git/remix-fire-tutorial/blob/main/apps/remix-jokes-app/README.md

ê¸€ì„ ì“°ë‹¤ë³´ë‹ˆ ë„ˆë¬´ ê¸¸ì–´ì§„ ê²ƒ ê°™ì•„ì„œ ë‚˜ëˆ„ì–´ì„œ ì‘ì„±í•´ë³´ë ¤ê³  í•©ë‹ˆë‹¤.

ë‹¤ìŒì€ ì—¬ê¸°ì„œ ë‹¤ë£¨ì§€ ëª»í–ˆë˜ ë‚˜ë¨¸ì§€ ë¶€ë¶„(action, Link, Meta, Optimistic UI ë“±ë“±)ì„ ì¨ë³´ê³ ì í•©ë‹ˆë‹¤.

## reference

- https://prismic.io/blog/compare-remix-vs-nextjs
- https://remix.run/
- https://velog.io/@velopert/learn-remix
- https://remix.run/docs/en/v1/tutorials/jokes
